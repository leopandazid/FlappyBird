var player;jQuery(document).ready(function($){var getUrl=window.location;if(getUrl.host.includes("chosic.com")){var siteURL=getUrl.protocol+"//"+getUrl.host}else{var siteURL=getUrl.protocol+"//"+getUrl.host+"/"+getUrl.pathname.split('/')[1];}
var waveForms=[];var currentWave=null;var processingScroll=false;var videosShown=false;$(window).on("scroll",checkScroll);var tu=null;if($("#tu").length){tu=jQuery.parseJSON($("#tu").text());}
function checkScroll(){if(processingScroll)return;processingScroll=true;var scrollBottom=$(window).scrollTop()+$(window).height();$('.waveform').not(".lazy-loaded").each(function(){var topDistance=$(this).offset().top;if((topDistance-300)<scrollBottom){$(this).addClass('lazy-loaded');var trackId=$(this).data('track');var waveFormSaved=$(this).data('saved');if(waveFormSaved=='yes'||waveFormSaved=='unkown'){$.ajax({url:siteURL+'/data/waveform/'+trackId+'.json',dataType:"json",indexValue:trackId,error:function(){createWave(this.indexValue,null);},success:function(data){createWave(this.indexValue,data);}});}else{createWave(trackId,null);}}});if($('.h2-users-videos').length&&!videosShown&&($('.h2-users-videos').offset().top-300)<scrollBottom){videosShown=true;$('.content-media__object').each(function(){var src=$(this).data('src');$(this).attr("src",src);});}
processingScroll=false;}
function createWave(trackId,data){if(tu==null){var audioUrl=$('#waveform'+trackId).data('url');}else{var audioUrl='https://www.chosic.com/wp-content/uploads/'+tu[trackId]+'.mp3';}
if(data==null){waveForms[trackId]=WaveSurfer.create(getWaveObject(trackId,false));waveForms[trackId].load(audioUrl);waveForms[trackId].on('ready',function(){var promise=waveForms[trackId].exportPCM(1024,10000,true);promise.then(function(peaksArr){var data={action:'save_peaks',peaks:peaksArr,track_id:trackId,secret:secret_n};$.post(ajaxurl,data,function(response){});});});}else{waveForms[trackId]=WaveSurfer.create(getWaveObject(trackId,true));waveForms[trackId].load(audioUrl,data,'none');}
waveForms[trackId].on('finish',function(){$('.fa-pause').addClass('fa-play').removeClass('fa-pause');});waveForms[trackId].on('audioprocess',function(){var wavesurfer=waveForms[trackId];if(wavesurfer.isPlaying()&&wavesurfer.getCurrentTime()>0){$('.play-loading').hide();$('.wave-player button').show();}});}
$('.waveform').on('click',function(){var clickedElement=$(event.target);var trackId=clickedElement.parent().data('track');playWave(trackId);});$('.wave-player').on('click',function(){var clickedElement=$(event.target);var trackId=clickedElement.data('track');if(waveForms[trackId].isPlaying()){pauseWave(trackId);currentWave=null;}else{playWave(trackId);}});function getWaveObject(trackId,backend){var obj={container:'#waveform'+trackId,partialRender:true,cursorWidth:2,height:50,progressColor:'#67c174',responsive:true,waveColor:'#a9a9a9',barRadius:2,cursorColor:'#000',barHeight:3,barMinHeight:1,hideScrollbar:true,fillParent:true,barGap:1,barWidth:2,barRadius:3,normalize:true,}
if(backend){obj['backend']='MediaElement';}
return obj;}
function playWave(trackId){$('#waveform'+trackId).removeClass('before');$('.play-loading').hide();$('.wave-player button').show();$('.fa-pause').addClass('fa-play').removeClass('fa-pause');$('.wave-player button[data-track="'+trackId+'"]').find('i').removeClass('fa-play').addClass('fa-pause');$('.wave-player button[data-track="'+trackId+'"]').hide();$('.wave-player[data-track="'+trackId+'"] .play-loading').show();if($(".play-now").length){$(".play-now")[0].pause();$(".play-now").removeClass("play-now");}
waveForms[trackId].play();if(currentWave!=null&&currentWave!=waveForms[trackId])currentWave.pause();currentWave=waveForms[trackId];}
function pauseWave(trackId){waveForms[trackId].pause();$('.wave-player button[data-track="'+trackId+'"]').find('i').removeClass('fa-pause').addClass('fa-play');}
var objRelatedTags={"Bright":["sunny","good","optimistic","light","easy","Cool"],"Happy":["positive","joy","upbeat","cheerful","pleasant"],"Games":["video Game","VGM","gaming","game"],"Horror":["halloween","scary","creepy","unnerving","spooky"],"Sad":["emotional","heartbreak","tragedy","cry","breakup"],"Dance":["party","disco","rhythm","House"],"Electronic":["Electronic","edm","dj"],"Celebration":["holiday","festival","carnival"],"Romantic":["love","valentine","passionate","sentimental"],"Indian":["india","Bollywood","Hindi","sitar","eastren","Bhangra"],"Children":["kids","child"],"Relaxing":["meditation","sleep","relax"],"Calm":["soft","peaceful","slow","study"],"Classical":[""],"Drums":["Percussion","drum"],"Beats":["Bass","beat","Breakbeat","hip hop","hiphop","rap"],"Noise":[],"Energetic":["energy"],"Motivational":["inspiring","Inspire","uplifting","creativity","success","Inspiration","Confident"],"Arabian":["arabic","oud","desert","sand","ney"],"Funny":["cheery","Quirky","memes","Playful","smile","fun"],"Guitar":[],"Cooking":["food","yummy","baking","kitchen"],"Cinematic":["film","scene","movie"],"Christmas":["Xmas"],"Rock":["metal","strong"],"Funky":["Groovy"],"Angry":["aggressive"],"Nostalgia":["memories","yearning","memory","nostalgic"],"Cartoon":["Animation","anime"],"Comedy":["comic","laughter","Crazy"],"Mystery":["sneaky","Mysterious","attention"],"Chinese":["china","oriental"],"Historical":["past","history"],"News":["breaking News","serious"],"Presentation":["slideshow","PowerPoint","training","tutorial","education","fact"],"Action":["dynamic","chase"],"Epic":["intense","battle","war","powerful"],"Wedding":["marry"],"Religious":["Christian","Islamic","spiritual","islam"],"Advertising":["Ads","marketing"],"Corporate":["business","company"],"Birthday":["happy birthday"],"Vlog":["travel"],"Dark":["darkness","pessimist","melancholic","threat"],"Ambient":["space"],"Intro":["logo"],"Celtic":["irish"],"patriotic":["independence","national","Military","pride","marches","honor","army"],"Vocal":["singing","songs","voice"],"jingle-bells":["Jingle Bells"],"lofi":["lo-fi"]};const queryString=window.location.search;urlParams=new URLSearchParams(queryString);var term=$('#term-name-color').val();if(term!='all'||urlParams.has('keyword')){$(".pl-tags").find("a:contains("+term+")").css("background-color","#000");$(".pl-tags").find("a:contains("+term+")").css("color","#fff");}else{$(".pl-tags").find("a:contains('All music')").css("background-color","#000");$(".pl-tags").find("a:contains('All music')").css("color","#fff");}
var isplay=false;var isEnglish=$("#is-english").val();if(isEnglish!=''&&$('#term-name').val()=='all'){$(".pl-tags").find("a:contains('كل الموسيقى')").css("background-color","#000");$(".pl-tags").find("a:contains('كل الموسيقى')").css("color","#fff");}
var keyId=0;var freeTags=$(".free-tags").text();var nowPlaying;var $featuredMedia=$("#featured-media");var $featuredVideo=$("#featured-video");var videoLoaded=false;var jsonFreeTags=null;if($(".free-tags").length){jsonFreeTags=jQuery.parseJSON(freeTags);jsonFreeTags=jQuery.grep(jsonFreeTags,function(value){return value!='all';});}
$('.categories-button, .moods-button, .topics-button, .top-tags-button').on('click',function(){$('.top').show();$('.top .tagcloud').css("display","none");$('.'+$(this).data('for')).fadeIn(1000);$(".free-music-dropdowns>button.active-choice").removeClass("active-choice");$(this).addClass('active-choice');});$('.btn-search-free-music').on('click',function(){searchMusic();});$("#search-word-free").on('keypress',function(e){if(e.which==13){searchMusic();}});function searchMusic(){var isGo=false;var inputVal=$("#search-word-free").val();if(inputVal==''){$('#search-word-free').css("border","2px solid #a80a34");return;}
if(isEnglish==''){if(jQuery.inArray(inputVal.toLowerCase(),jsonFreeTags)!==-1){window.location.href=siteURL+'/free-music/'+inputVal.toLowerCase()+'/';return;}}else{if(jQuery.inArray(inputVal.toLowerCase(),jsonFreeTags)!==-1){window.location.href=siteURL+'/'+isEnglish+'free-music/'+inputVal.toLowerCase()+'/';return;}}
Object.keys(objRelatedTags).forEach(key=>{if(isEnglish==''){objRelatedTags[key].forEach((value,index)=>{if(key.toLowerCase()==inputVal.toLowerCase()||value.toLowerCase()==inputVal.toLowerCase()){window.location.href=siteURL+'/'+isEnglish+'free-music/'+key.toLowerCase()+'/';isGo=true;return false;}})}else{window.location.href=siteURL+'/'+isEnglish+'free-music/all/?keyword='+inputVal;}});if(!isGo){window.location.href=siteURL+'/'+isEnglish+'free-music/all/?keyword='+inputVal;}}
$(window).bind('beforeunload',function(){$('#form-suggestions-free').hide();});$('#form-suggestions-free').hide();var i=0;$("#search-word-free").keyup(function(e){var indexId=1;if(e.which!=13)
$('#form-suggestions-free').show();switch(e.which){case 13:var keyW='#hh'+keyId;$(keyW).click();break;case 38:if(keyId==0)return;keyId=keyId-1;var keyW='#hh'+keyId;$(".span-class a").css("background-color","transparent");var spanText=$(keyW).text();$(keyW).css("background-color","#E8E8E8");$('#search-word-free').val(spanText);break;case 40:var spanCount=$('#form-suggestions-free').children().length;if(keyId==spanCount){keyId=0;}
keyId=keyId+1;var keyW='#hh'+keyId;$(".span-class a").css("background-color","transparent");var spanText=$(keyW).text();$(keyW).css("background-color","#E8E8E8");$('#search-word-free').val(spanText);break;default:var inputVal=$("#search-word-free").val();$("#form-suggestions-free").empty();$.each(jsonFreeTags,function(index,value){if(value.toLowerCase().includes(inputVal.toLowerCase())){var keyWId='hh'+indexId;var url=siteURL+'/'+isEnglish+'free-music/'+value.replace(" ","-").toLowerCase()+'/';$("#form-suggestions-free").append('<span data-id="'+indexId+'" class="span-class" data-tag-name="'+value+'" data-slug-name="'+value+'" ><a id="'+keyWId+'" href="'+url+'">'+capitalizeFirstLetter(value)+'</a></span>');indexId=indexId+1;if(indexId==8){return false;}}});if(isEnglish==''){Object.keys(objRelatedTags).forEach(key=>{objRelatedTags[key].forEach((value,index)=>{if(indexId>=8){return false;}
if(value.toLowerCase().includes(inputVal.toLowerCase())){var keyWId='hh'+indexId;var url=siteURL+'/'+isEnglish+'free-music/'+key.replace(" ","-").toLowerCase()+'/';$("#form-suggestions-free").append('<span data-id="'+indexId+'" data-slug-name="'+key+'" class="span-class" ><a id="'+keyWId+'" href="'+url+'">'+capitalizeFirstLetter(value)+'</a></span>');indexId=indexId+1;}})});}}});function capitalizeFirstLetter(string){return string.charAt(0).toUpperCase()+string.slice(1);}
$("body").on('mouseover',".span-class a",function(){$(".span-class a").css("background-color","transparent");$(this).css("background-color","#E8E8E8");});$(document).mouseup(function(e){var container=$("#form-suggestions-free");if(!container.is(e.target)&&container.has(e.target).length===0){container.hide();}});$("body").on('click',".span-class",function(){if(typeof gtag!=="undefined")
gtag('event','free_music_search',{'event_category':'free_music_search'});spanText=$(this).text();$('#search-word-free').val(spanText);$('#form-suggestions-free').hide();});$(".play-track").click(function(event){var clickedElement=$(event.target);var index=clickedElement.data("track-index");var audio=document.getElementById('audio'+index);if(audio.paused){audio.play();}else{audio.pause();}});$("body").on('click',".buy",function(){gtag('event','buy',{'event_category':'buy'});});$('.donate').click(function(event){gtag('event','donate',{'event_category':'donate'});});var progressStopped=false;var trackUrl;var trackId;var downloadBtnClickCount=0;var downloadAgain=0;var isContributer=false;$('.download').click(function(event){downloadAgain=downloadAgain+1;downloadBtnClickCount+=1;if(downloadBtnClickCount==2){if(typeof gtag!=="undefined")
gtag('event','multiple_download_same_page',{'event_category':'multiple_download_same_page'});}
var clickedElement=$(event.target);trackUrl=clickedElement.data('url');trackId=clickedElement.data('track-id');var attribution=clickedElement.data('attribution');if(typeof(Storage)!=="undefined"){var downloadsCount=0;if(localStorage.getItem("userDownloadsCount")!==null){downloadsCount=localStorage.getItem("userDownloadsCount");downloadsCount=parseInt(downloadsCount);var timePay=localStorage.getItem("userPaymentTime");if(localStorage.getItem("userPaymentTime")==null){isContributer=false;}else{var todayDate=new Date();timePay=new Date(timePay);var diffTime=Math.abs(todayDate-timePay);diffDays=Math.ceil(diffTime/(1000*60*60*24));if(diffDays<30){isContributer=true;}else{isContributer=false;}}
if(downloadsCount%7==0){if(typeof gtag!=="undefined")
gtag('event','1user_7downlosds',{'event_category':'1user_7downlosds'});if(!isContributer){var modal=$("#myModal-many-downloads");modal.show();var span=$(".close");span.click(function(){modal.hide();progressStopped=true;})
$window.click(function(event){if(event.target.id=='myModal-many-downloads'){modal.hide();progressStopped=true;}});setDownloadsCountInLocalStorage(downloadsCount+1);return;}}}
setDownloadsCountInLocalStorage(downloadsCount+1);}
startDownload(downloadAgain);});$("body").on('click',".skip-donate",function(){$('#myModal-many-downloads').hide();startDownload();});function startDownload(downloadAgain){$('#modal-step-0').hide();$('#modal-step-2').hide();popupDownload();progressDone(downloadAgain);}
$('#attribution-ok').click(function(event){startDownload();});var $window=$(window);function popupDownload(){$('#download-link').attr("href",trackUrl);var modal=$("#myModal");modal.show();var span=$(".close");span.click(function(){modal.hide();progressStopped=true;})
$window.click(function(event){if(event.target.id=='myModal'){modal.hide();progressStopped=true;}});}
$(".similar-tracks-btn").click(function(e){e.preventDefault();$("#myModal").hide();$("#similar-tracks-top")[0].scrollIntoView();});function progress(){progressStopped=false;var elem=document.getElementById("myBar");var width=1;var id=setInterval(frame,10);function frame(){if(progressStopped){clearInterval(id);return;}
if(width>=100){clearInterval(id);progressDone();}else{width+=0.3;elem.style.width=width+"%";}}}
var clickedLink=false;function progressDone(downloadAgain,clickedLink){if(!clickedLink){$('#modal-step-2').show();$('#modal-step-1').hide();}
if(downloadAgain>1){$('.div-download2').css("display","block");return;}
var aElem=$('<a href="'+trackUrl+'" download>تحميل</a>');aElem[0].click();var prevTag='';if(isEnglish==''){var referrer=document.referrer;referrer=referrer.split('?')[0];var segments=referrer.split('/');for(i=segments.length-1;i>=0;i--){if(segments[i]=='free-music')break;if(jQuery.inArray(segments[i].toLowerCase(),jsonFreeTags)!==-1){prevTag=segments[i];}}}
var data={action:'load_action',trackNumber:trackId,prevTag:prevTag,secret:secret_n};if(downloadAgain<2){$.post(ajaxurl,data,function(response){});}}
$('#copy').click(function(){var copyText=document.getElementById("copy-span");var textArea=document.createElement("textarea");textArea.value=copyText.textContent;document.body.appendChild(textArea);textArea.select();document.execCommand("Copy");textArea.remove();$('.fa-copy').removeClass('far fa-copy').addClass('fas fa-check');});$('#copy-rect-text').click(function(){var copyText=document.getElementById("copy-span-rect");var textArea=document.createElement("textarea");textArea.value=copyText.textContent;document.body.appendChild(textArea);textArea.select();document.execCommand("Copy");textArea.remove();$('.fa-copy-rect').removeClass('far fa-copy').addClass('fas fa-check');});window.onYouTubeIframeAPIReady=function(){player=new YT.Player("featured-video",{});};function initialStart(videoIndex){if(!videoLoaded){lazyLoad();videoLoaded=true;}
if(player&&typeof player.loadVideoById=='function'){player.loadVideoById(videoIndex);}else{setTimeout(function(){initialStart(videoIndex);},500);return;}}
function lazyLoad(){var src=$featuredVideo.data("src");$featuredVideo.attr("src",src);$featuredVideo.hide();$featuredMedia.hide();$('#orginal-content-media').height(0);var tag=document.createElement('script');tag.src="//www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName('script')[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);}
$('.playlist-item, .youtube, .play-button').click(function(event){var newIndex=$(event.target).data('index');var vidPlaceId='#item-'+newIndex;$featuredMedia.show();$featuredVideo.show();initialStart(newIndex);$('#featured-media').offset({top:$(vidPlaceId).offset().top});});function getEvantoTracks(){if($(window).width()>=768){var pageSize=8;var itemWidth='25%';}else if($(window).width()>=425){var pageSize=6;var itemWidth='33.3%';}else{var pageSize=4;var itemWidth='50%';}
var envatoIndex=[0,6];var j=0;var term_text=$('#term-name-color').val();var term=$('#term-name').val();var page=$('#page-number').val();if(isNaN(page))page=1;if(term=='all')term='';$.ajax({url:'https://api.envato.com/v1/discovery/search/search/item?term='+term+'&site=audiojungle.net&page_size='+pageSize+'&sort_by=sales&price_min=19&page='+page,dataType:"json",success:function(dataAsJson){var affLink='https://1.envato.market/c/2340412/275988/4415?u=';if(dataAsJson.matches.length!==0){var html1item='';var link_en_ar='ar/';for(i=0;i<dataAsJson.matches.length;i++){var item=dataAsJson.matches[i];var icon='';var price=item.price_cents;price=price/100;var buyWord='شراء';if(isEnglish==''){buyWord='Buy';link_en_ar='';}
if(i==pageSize/2){$('#ad-envato-first').html('<div class="sponsored">Sponsored by Envato market</div><div class="track-info track ad"><div id="container-envato">'+html1item+'</div></div>');j=j+1;html1item='';}
html1item+='<div id="envato'+i+'" style="width:'+itemWidth+';"><div class="img-envato envato-inside"><a href="'+affLink+item.url+'" rel="nofollow"><img src="'+item.previews.icon_with_audio_preview.icon_url+'"/></a></div><div class="envato-title envato-inside"><span>'+item.name+'</span></div><div class="envato-buy envato-inside"><div class="track-audio-buy-play div-left"><div class="suggest-player"><button style="padding: 0px 10px 2px 10px;"><i class="play-all-b fas fa-play"></i></button><audio id="myAudio" class="" preload="none"> <source src="'+item.previews.icon_with_audio_preview.mp3_url+'" type="audio/mpeg"></audio></div></div><div class="div-right"><a href="'+affLink+item.url+'" rel="nofollow"> $'+price+'<i class="fas fa-shopping-cart"></i></a></div></div></div>';}
$('#ad-envato-second').html('<div class="track-info track ad"><div id="container-envato">'+html1item+'</div></div>');}},beforeSend:function(xhr){xhr.setRequestHeader("Authorization","Bearer "+'IfpjZeTgWhjZ3EDSkTOje8n53f9K5JzW');},error:function(){console.log("Error retrieving evanto API");}});}
function getShutterstockTracks(){if($(window).width()>=768){var pageSize=8;var itemWidth='25%';}else if($(window).width()>=425){var pageSize=6;var itemWidth='33.3%';}else{var pageSize=4;var itemWidth='50%';}
var shutterIndex=[3,9];var j=0;var term_text=$('#term-name-color').val();var term=$('#term-name').val();if(term=='all')term='';$.ajax({url:'https://api.shutterstock.com/v2/audio/search?library=premier&is_instrumental=true&query='+term,dataType:"json",success:function(dataAsJson){if(dataAsJson.data.length!==0){var html1item='';var link_en_ar='ar/';for(i=0;i<pageSize;i++){var item=dataAsJson.data[i];var icon='';var price=1;price=price/100;var buyWord='شراء';if(isEnglish==''){buyWord='Buy';link_en_ar='';}
if(i==pageSize/2){$('#ad-shutter-'+shutterIndex[j]).html('<div class="sponsored">Sponsored by Shutterstock</div><div class="track-info track ad"><div id="container-envato">'+html1item+'</div></div>');j=j+1;html1item='';}
var affUrl=dataAsJson.data[i].affiliate_url;html1item+='<div id="envato'+i+'" style="width:'+itemWidth+';"><div class=" shutter-bg img-envato envato-inside" style="background-image: url('+item.assets.waveform.url+');"></div><div class="envato-title envato-inside"><a href="'+affUrl+'" rel="nofollow"><span>'+item.title+'</span></a></div><div class="envato-buy envato-inside"><div class="track-audio-buy-play div-left"><div class="suggest-player"><button style="padding: 0px 10px 2px 10px;"><i class="play-all-b fas fa-play"></i></button><audio id="myAudio" class="" preload="none"> <source src="'+item.assets.preview_mp3.url+'" type="audio/mpeg"></audio></div></div><div class="div-right"><a rel="nofollow" href="'+affUrl+'" > <i class="fas fa-shopping-cart"></i></a></div></div></div>';}
$('#ad-shutter-'+shutterIndex[j]).html('<div class="track-info track ad"><div id="container-envato">'+html1item+'</div></div>');}},beforeSend:function(xhr){xhr.setRequestHeader("Authorization","Bearer "+'v2/a1p2R01oMDlxYlkxa1FnS0c0WWpKc3p6Qkp6cnFjYUQvMjAyNjMyMjc3L2N1c3RvbWVyLzMvdEItY0h2S3ppQ3V3WjYwM0NGdnRFNGZQNXpfN3VsZHZMNHVWZjBJQUhUdXVqa3pucUYwX0Q3LWc0dGo2M216TTJ1YXA5cWl4RDVCNHlOMjVfV2lHZmJXc2xGalJZN2R4MTEtcE1YZHhfbUR4aUxmM0ppSDRKc1piajhjMmtjSUFCakNfU2FkRXNIWGJvSnFGZ1FPNnNYSzJxWkZoSWtQTm54VXIxcVAtQ2x5WWxmOEZQbDQtVERDaXl6SlRpdzJqLXVhdFBCWXNUYmt1NHpDVXh6QUhRQQ');},error:function(){console.log("Error retrieving evanto API");}});}
function getEvantoTracks4(){if($(window).width()>=768){var pageSize=16;var itemWidth='25%';var addPoint=4;}else if($(window).width()>=425){var pageSize=12;var itemWidth='33.3%';var addPoint=3;}else{var pageSize=8;var itemWidth='50%';var addPoint=2;}
var envatoIndex=[0,4,8,11];var j=0;var term_text=$('#term-name-color').val();var term=$('#term-name').val();if(term=='all')term='';$.ajax({url:'https://api.envato.com/v1/discovery/search/search/item?term='+term+'&site=audiojungle.net&page_size='+pageSize+'&sort_by=sales&price_min=19',dataType:"json",success:function(dataAsJson){var addNowPoint=addPoint;var affLink='https://1.envato.market/c/2340412/275988/4415?u=';if(dataAsJson.matches.length!==0){var html1item='';var link_en_ar='ar/';for(i=0;i<dataAsJson.matches.length;i++){var item=dataAsJson.matches[i];var icon='';var price=item.price_cents;price=price/100;var buyWord='شراء';if(isEnglish==''){buyWord='Buy';link_en_ar='';}
if(i==addNowPoint){$('#ad-envato-'+envatoIndex[j]).html('<div class="track-info track ad"><div id="container-envato">'+html1item+'</div></div>');j=j+1;html1item='';addNowPoint=addNowPoint+addPoint;}
html1item+='<div id="envato'+i+'" style="width:'+itemWidth+';"><div class="img-envato envato-inside"><a href="'+affLink+item.url+'" rel="nofollow"><img src="'+item.previews.icon_with_audio_preview.icon_url+'"/></a></div><div class="envato-title envato-inside"><a href="'+affLink+item.url+'" rel="nofollow"><span>'+item.name+'</span></a></div><div class="envato-buy envato-inside"><div class="track-audio-buy-play div-left"><div class="suggest-player"><button style="padding: 0px 10px 2px 10px;"><i class="play-all-b fas fa-play"></i></button><audio id="myAudio" class="" preload="none"> <source src="'+item.previews.icon_with_audio_preview.mp3_url+'" type="audio/mpeg"></audio></div></div><div class="div-right"><a href="'+affLink+item.url+'" rel="nofollow"> $'+price+'<i class="fas fa-shopping-cart"></i></a></div></div></div>';}
$('#ad-envato-'+envatoIndex[j]).html('<div class="track-info track ad"><div id="container-envato">'+html1item+'</div></div>');}},beforeSend:function(xhr){xhr.setRequestHeader("Authorization","Bearer "+'IfpjZeTgWhjZ3EDSkTOje8n53f9K5JzW');},error:function(){console.log("Error retrieving evanto API");}});}
$("body").on('click',".suggest-player",function(){var trackId=$(".fa-pause").data('track');if(trackId!=null){pauseWave(trackId);}
var icon=$(this).find('i');$('.fa-pause').addClass('fa-play').removeClass('fa-pause');icon.removeClass('fa-play');icon.addClass('fa-pause');var audio=$(this).children('audio');$('.suggest-player').css("background-color","#fff");$(this).css("background-color","#eee");var playling=audio.hasClass("play-now");if($(".play-now").length){$(".play-now")[0].pause();$(".play-now").removeClass("play-now");}
if(!playling){audio.addClass("play-now");audio[0].play();}else{$(this).css("background-color","#fff");icon.removeClass('fa-pause');icon.addClass('fa-play');}});function setDownloadsCountInLocalStorage(downloadsCount){if(typeof(Storage)!=="undefined"){localStorage.setItem("userDownloadsCount",downloadsCount);}}
var usersVideosSpan=$('.users-videos-span').text();if($(".users-videos-span").length){var usersVideosSpanObj=jQuery.parseJSON(usersVideosSpan);}
$("body").on('click',".show-more-videos",function(){if(typeof gtag!=="undefined")
gtag('event','show-more-videos',{'event_category':'show-more-videos'});var videosDiv='';var index=1;if(usersVideosSpanObj!=null){for(let item in usersVideosSpanObj){if(index++>3&&index<11){videosDiv+='<div class="category-inner"><figure class="aligncenter content-media content-media--video" id="featured-media"><iframe class="content-media__object" id="featured-video" src="https://www.youtube.com/embed/'+item+'?enablejsapi=1&rel=0&showinfo=1&loop=1&playsinline=1&modestbranding=1"frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></figure><div class="yt-title">'+usersVideosSpanObj[item].title+'</div><div class="yt-channel">'+usersVideosSpanObj[item].channel+'</div></div>';}}
$('.user-videos').append(videosDiv);$(".show-more-videos").hide();}});$("body").on('click',".download2",function(){clickedLink=true;progressDone(1,clickedLink);if(typeof gtag!=="undefined")
gtag('event','free_music_search',{'event_category':'download-link-bottom-popup'});});$("body").on('click',".yt-videos",function(event){$('.pl-embed').html('');var clickedElement=$(event.target);var trackId=clickedElement.data('track-id');var videosIds=clickedElement.data('videos');if(videosIds==''){return;}
videosIds=videosIds.substring(0,videosIds.length-1);$('.pl-embed[data-track-id="'+trackId+'"]').html('<figure class="aligncenter content-media content-media--video" id="featured-media"><iframe class="content-media__object" id="featured-video" src="https://www.youtube.com/embed/VIDEO_ID?playlist='+videosIds+'&enablejsapi=1&rel=0&showinfo=1&loop=1&playsinline=1&modestbranding=1"frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></figure>');if(typeof gtag!=="undefined")
gtag('event','fm_youtube_show_vids',{'event_category':'fm_youtube_show_vids'});});$('#notes-more').on('click',function(){$('#notes-second').slideDown();$('#notes-more').hide();});checkScroll();function isScrolledIntoView(elem){var docViewTop=$(window).scrollTop();var docViewBottom=docViewTop+$(window).height();var elemTop=$(elem).offset().top;var elemBottom=elemTop+$(elem).height();return((elemBottom<=docViewBottom)&&(elemTop>=docViewTop));}
function checkSticky(){if($('#form-suggestions-free').is(":visible")){return;}
var offset=Math.floor($('#sticky-search-container').offset().top);if(!isScrolledIntoView($('#sticky-search-container'))&&$(window).scrollTop()>offset){$('#sticky-search').addClass("is-sticky-search");}else{$('#sticky-search').removeClass("is-sticky-search");}}
$("body").on('click',".chosen-tag",function(){window.location.href=siteURL+'/'+isEnglish+'free-music/all/';});});
/*!
 * wavesurfer.js 4.6.0 (2021-03-05)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */
(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==='object'&&typeof module==='object')
module.exports=factory();else if(typeof define==='function'&&define.amd)
define("WaveSurfer",[],factory);else if(typeof exports==='object')
exports["WaveSurfer"]=factory();else
root["WaveSurfer"]=factory();})(this,function(){return(()=>{var __webpack_modules__=({"./src/drawer.canvasentry.js":
/*!***********************************!*\
  !*** ./src/drawer.canvasentry.js ***!
  \***********************************/
((module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",({value:true}));exports.default=void 0;var _style=_interopRequireDefault(__webpack_require__(
/*! ./util/style */
"./src/util/style.js"));var _getId=_interopRequireDefault(__webpack_require__(
/*! ./util/get-id */
"./src/util/get-id.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
var CanvasEntry=function(){function CanvasEntry(){_classCallCheck(this,CanvasEntry);this.wave=null;this.waveCtx=null;this.progress=null;this.progressCtx=null;this.start=0;this.end=1;this.id=(0,_getId.default)(typeof this.constructor.name!=='undefined'?this.constructor.name.toLowerCase()+'_':'canvasentry_');this.canvasContextAttributes={};}
_createClass(CanvasEntry,[{key:"initWave",value:function initWave(element){this.wave=element;this.waveCtx=this.wave.getContext('2d',this.canvasContextAttributes);}},{key:"initProgress",value:function initProgress(element){this.progress=element;this.progressCtx=this.progress.getContext('2d',this.canvasContextAttributes);}},{key:"updateDimensions",value:function updateDimensions(elementWidth,totalWidth,width,height){this.start=this.wave.offsetLeft/totalWidth||0;this.end=this.start+elementWidth/totalWidth;this.wave.width=width;this.wave.height=height;var elementSize={width:elementWidth+'px'};(0,_style.default)(this.wave,elementSize);if(this.hasProgressCanvas){this.progress.width=width;this.progress.height=height;(0,_style.default)(this.progress,elementSize);}}},{key:"clearWave",value:function clearWave(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height);if(this.hasProgressCanvas){this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height);}}},{key:"setFillStyles",value:function setFillStyles(waveColor,progressColor){this.waveCtx.fillStyle=waveColor;if(this.hasProgressCanvas){this.progressCtx.fillStyle=progressColor;}}},{key:"fillRects",value:function fillRects(x,y,width,height,radius){this.fillRectToContext(this.waveCtx,x,y,width,height,radius);if(this.hasProgressCanvas){this.fillRectToContext(this.progressCtx,x,y,width,height,radius);}}},{key:"fillRectToContext",value:function fillRectToContext(ctx,x,y,width,height,radius){if(!ctx){return;}
if(radius){this.drawRoundedRect(ctx,x,y,width,height,radius);}else{ctx.fillRect(x,y,width,height);}}},{key:"drawRoundedRect",value:function drawRoundedRect(ctx,x,y,width,height,radius){if(height===0){return;}
if(height<0){height*=-1;y-=height;}
ctx.beginPath();ctx.moveTo(x+radius,y);ctx.lineTo(x+width-radius,y);ctx.quadraticCurveTo(x+width,y,x+width,y+radius);ctx.lineTo(x+width,y+height-radius);ctx.quadraticCurveTo(x+width,y+height,x+width-radius,y+height);ctx.lineTo(x+radius,y+height);ctx.quadraticCurveTo(x,y+height,x,y+height-radius);ctx.lineTo(x,y+radius);ctx.quadraticCurveTo(x,y,x+radius,y);ctx.closePath();ctx.fill();}},{key:"drawLines",value:function drawLines(peaks,absmax,halfH,offsetY,start,end){this.drawLineToContext(this.waveCtx,peaks,absmax,halfH,offsetY,start,end);if(this.hasProgressCanvas){this.drawLineToContext(this.progressCtx,peaks,absmax,halfH,offsetY,start,end);}}},{key:"drawLineToContext",value:function drawLineToContext(ctx,peaks,absmax,halfH,offsetY,start,end){if(!ctx){return;}
var length=peaks.length/2;var first=Math.round(length*this.start);var last=Math.round(length*this.end)+1;var canvasStart=first;var canvasEnd=last;var scale=this.wave.width/(canvasEnd-canvasStart-1);var halfOffset=halfH+offsetY;var absmaxHalf=absmax/halfH;ctx.beginPath();ctx.moveTo((canvasStart-first)*scale,halfOffset);ctx.lineTo((canvasStart-first)*scale,halfOffset-Math.round((peaks[2*canvasStart]||0)/absmaxHalf));var i,peak,h;for(i=canvasStart;i<canvasEnd;i++){peak=peaks[2*i]||0;h=Math.round(peak/absmaxHalf);ctx.lineTo((i-first)*scale+this.halfPixel,halfOffset-h);}
var j=canvasEnd-1;for(j;j>=canvasStart;j--){peak=peaks[2*j+1]||0;h=Math.round(peak/absmaxHalf);ctx.lineTo((j-first)*scale+this.halfPixel,halfOffset-h);}
ctx.lineTo((canvasStart-first)*scale,halfOffset-Math.round((peaks[2*canvasStart+1]||0)/absmaxHalf));ctx.closePath();ctx.fill();}},{key:"destroy",value:function destroy(){this.waveCtx=null;this.wave=null;this.progressCtx=null;this.progress=null;}},{key:"getImage",value:function getImage(format,quality,type){var _this=this;if(type==='blob'){return new Promise(function(resolve){_this.wave.toBlob(resolve,format,quality);});}else if(type==='dataURL'){return this.wave.toDataURL(format,quality);}}}]);return CanvasEntry;}();exports.default=CanvasEntry;module.exports=exports.default;}),"./src/drawer.js":
/*!***********************!*\
  !*** ./src/drawer.js ***!
  \***********************/
((module,exports,__webpack_require__)=>{"use strict";function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
Object.defineProperty(exports,"__esModule",({value:true}));exports.default=void 0;var util=_interopRequireWildcard(__webpack_require__(
/*! ./util */
"./src/util/index.js"));function _getRequireWildcardCache(){if(typeof WeakMap!=="function")return null;var cache=new WeakMap();_getRequireWildcardCache=function _getRequireWildcardCache(){return cache;};return cache;}
function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}
function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}
function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}
function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}
function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}
function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}
function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var Drawer=function(_util$Observer){_inherits(Drawer,_util$Observer);var _super=_createSuper(Drawer);function Drawer(container,params){var _this;_classCallCheck(this,Drawer);_this=_super.call(this);_this.container=container;_this.params=params;_this.width=0;_this.height=params.height*_this.params.pixelRatio;_this.lastPos=0;_this.wrapper=null;return _this;}
_createClass(Drawer,[{key:"style",value:function style(el,styles){return util.style(el,styles);}},{key:"createWrapper",value:function createWrapper(){this.wrapper=this.container.appendChild(document.createElement('wave'));this.style(this.wrapper,{display:'block',position:'relative',userSelect:'none',webkitUserSelect:'none',height:this.params.height+'px'});if(this.params.fillParent||this.params.scrollParent){this.style(this.wrapper,{width:'100%',overflowX:this.params.hideScrollbar?'hidden':'auto',overflowY:'hidden'});}
this.setupWrapperEvents();}},{key:"handleEvent",value:function handleEvent(e,noPrevent){!noPrevent&&e.preventDefault();var clientX=e.targetTouches?e.targetTouches[0].clientX:e.clientX;var bbox=this.wrapper.getBoundingClientRect();var nominalWidth=this.width;var parentWidth=this.getWidth();var progress;if(!this.params.fillParent&&nominalWidth<parentWidth){progress=(this.params.rtl?bbox.right-clientX:clientX-bbox.left)*(this.params.pixelRatio/nominalWidth)||0;}else{progress=((this.params.rtl?bbox.right-clientX:clientX-bbox.left)+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0;}
return util.clamp(progress,0,1);}},{key:"setupWrapperEvents",value:function setupWrapperEvents(){var _this2=this;this.wrapper.addEventListener('click',function(e){var scrollbarHeight=_this2.wrapper.offsetHeight-_this2.wrapper.clientHeight;if(scrollbarHeight!==0){var bbox=_this2.wrapper.getBoundingClientRect();if(e.clientY>=bbox.bottom-scrollbarHeight){return;}}
if(_this2.params.interact){_this2.fireEvent('click',e,_this2.handleEvent(e));}});this.wrapper.addEventListener('dblclick',function(e){if(_this2.params.interact){_this2.fireEvent('dblclick',e,_this2.handleEvent(e));}});this.wrapper.addEventListener('scroll',function(e){return _this2.fireEvent('scroll',e);});}},{key:"drawPeaks",value:function drawPeaks(peaks,length,start,end){if(!this.setWidth(length)){this.clearWave();}
this.params.barWidth?this.drawBars(peaks,0,start,end):this.drawWave(peaks,0,start,end);}},{key:"resetScroll",value:function resetScroll(){if(this.wrapper!==null){this.wrapper.scrollLeft=0;}}},{key:"recenter",value:function recenter(percent){var position=this.wrapper.scrollWidth*percent;this.recenterOnPosition(position,true);}},{key:"recenterOnPosition",value:function recenterOnPosition(position,immediate){var scrollLeft=this.wrapper.scrollLeft;var half=~~(this.wrapper.clientWidth/2);var maxScroll=this.wrapper.scrollWidth-this.wrapper.clientWidth;var target=position-half;var offset=target-scrollLeft;if(maxScroll==0){return;}
if(!immediate&&-half<=offset&&offset<half){var rate=this.params.autoCenterRate;rate/=half;rate*=maxScroll;offset=Math.max(-rate,Math.min(rate,offset));target=scrollLeft+offset;}
target=Math.max(0,Math.min(maxScroll,target));if(target!=scrollLeft){this.wrapper.scrollLeft=target;}}},{key:"getScrollX",value:function getScrollX(){var x=0;if(this.wrapper){var pixelRatio=this.params.pixelRatio;x=Math.round(this.wrapper.scrollLeft*pixelRatio);if(this.params.scrollParent){var maxScroll=~~(this.wrapper.scrollWidth*pixelRatio-this.getWidth());x=Math.min(maxScroll,Math.max(0,x));}}
return x;}},{key:"getWidth",value:function getWidth(){return Math.round(this.container.clientWidth*this.params.pixelRatio);}},{key:"setWidth",value:function setWidth(width){if(this.width==width){return false;}
this.width=width;if(this.params.fillParent||this.params.scrollParent){this.style(this.wrapper,{width:''});}else{this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+'px'});}
this.updateSize();return true;}},{key:"setHeight",value:function setHeight(height){if(height==this.height){return false;}
this.height=height;this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+'px'});this.updateSize();return true;}},{key:"progress",value:function progress(_progress){var minPxDelta=1/this.params.pixelRatio;var pos=Math.round(_progress*this.width)*minPxDelta;if(pos<this.lastPos||pos-this.lastPos>=minPxDelta){this.lastPos=pos;if(this.params.scrollParent&&this.params.autoCenter){var newPos=~~(this.wrapper.scrollWidth*_progress);this.recenterOnPosition(newPos,this.params.autoCenterImmediately);}
this.updateProgress(pos);}}},{key:"destroy",value:function destroy(){this.unAll();if(this.wrapper){if(this.wrapper.parentNode==this.container){this.container.removeChild(this.wrapper);}
this.wrapper=null;}}},{key:"updateCursor",value:function updateCursor(){}},{key:"updateSize",value:function updateSize(){}},{key:"drawBars",value:function drawBars(peaks,channelIndex,start,end){}},{key:"drawWave",value:function drawWave(peaks,channelIndex,start,end){}},{key:"clearWave",value:function clearWave(){}},{key:"updateProgress",value:function updateProgress(position){}}]);return Drawer;}(util.Observer);exports.default=Drawer;module.exports=exports.default;}),"./src/drawer.multicanvas.js":
/*!***********************************!*\
  !*** ./src/drawer.multicanvas.js ***!
  \***********************************/
((module,exports,__webpack_require__)=>{"use strict";function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
Object.defineProperty(exports,"__esModule",({value:true}));exports.default=void 0;var _drawer=_interopRequireDefault(__webpack_require__(
/*! ./drawer */
"./src/drawer.js"));var util=_interopRequireWildcard(__webpack_require__(
/*! ./util */
"./src/util/index.js"));var _drawer2=_interopRequireDefault(__webpack_require__(
/*! ./drawer.canvasentry */
"./src/drawer.canvasentry.js"));function _getRequireWildcardCache(){if(typeof WeakMap!=="function")return null;var cache=new WeakMap();_getRequireWildcardCache=function _getRequireWildcardCache(){return cache;};return cache;}
function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}
function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}
function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}
function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}
function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}
function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}
function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}
function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var MultiCanvas=function(_Drawer){_inherits(MultiCanvas,_Drawer);var _super=_createSuper(MultiCanvas);function MultiCanvas(container,params){var _this;_classCallCheck(this,MultiCanvas);_this=_super.call(this,container,params);_this.maxCanvasWidth=params.maxCanvasWidth;_this.maxCanvasElementWidth=Math.round(params.maxCanvasWidth/params.pixelRatio);_this.hasProgressCanvas=params.waveColor!=params.progressColor;_this.halfPixel=0.5/params.pixelRatio;_this.canvases=[];_this.progressWave=null;_this.EntryClass=_drawer2.default;_this.canvasContextAttributes=params.drawingContextAttributes;_this.overlap=2*Math.ceil(params.pixelRatio/2);_this.barRadius=params.barRadius||0;return _this;}
_createClass(MultiCanvas,[{key:"init",value:function init(){this.createWrapper();this.createElements();}},{key:"createElements",value:function createElements(){this.progressWave=this.wrapper.appendChild(this.style(document.createElement('wave'),{position:'absolute',zIndex:3,left:0,top:0,bottom:0,overflow:'hidden',width:'0',display:'none',boxSizing:'border-box',borderRightStyle:'solid',pointerEvents:'none'}));this.addCanvas();this.updateCursor();}},{key:"updateCursor",value:function updateCursor(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+'px',borderRightColor:this.params.cursorColor});}},{key:"updateSize",value:function updateSize(){var _this2=this;var totalWidth=Math.round(this.width/this.params.pixelRatio);var requiredCanvases=Math.ceil(totalWidth/(this.maxCanvasElementWidth+this.overlap));while(this.canvases.length<requiredCanvases){this.addCanvas();}
while(this.canvases.length>requiredCanvases){this.removeCanvas();}
var canvasWidth=this.maxCanvasWidth+this.overlap;var lastCanvas=this.canvases.length-1;this.canvases.forEach(function(entry,i){if(i==lastCanvas){canvasWidth=_this2.width-_this2.maxCanvasWidth*lastCanvas;}
_this2.updateDimensions(entry,canvasWidth,_this2.height);entry.clearWave();});}},{key:"addCanvas",value:function addCanvas(){var entry=new this.EntryClass();entry.canvasContextAttributes=this.canvasContextAttributes;entry.hasProgressCanvas=this.hasProgressCanvas;entry.halfPixel=this.halfPixel;var leftOffset=this.maxCanvasElementWidth*this.canvases.length;entry.initWave(this.wrapper.appendChild(this.style(document.createElement('canvas'),{position:'absolute',zIndex:2,left:leftOffset+'px',top:0,bottom:0,height:'100%',pointerEvents:'none'})));if(this.hasProgressCanvas){entry.initProgress(this.progressWave.appendChild(this.style(document.createElement('canvas'),{position:'absolute',left:leftOffset+'px',top:0,bottom:0,height:'100%'})));}
this.canvases.push(entry);}},{key:"removeCanvas",value:function removeCanvas(){var lastEntry=this.canvases[this.canvases.length-1];lastEntry.wave.parentElement.removeChild(lastEntry.wave);if(this.hasProgressCanvas){lastEntry.progress.parentElement.removeChild(lastEntry.progress);}
if(lastEntry){lastEntry.destroy();lastEntry=null;}
this.canvases.pop();}},{key:"updateDimensions",value:function updateDimensions(entry,width,height){var elementWidth=Math.round(width/this.params.pixelRatio);var totalWidth=Math.round(this.width/this.params.pixelRatio);entry.updateDimensions(elementWidth,totalWidth,width,height);this.style(this.progressWave,{display:'block'});}},{key:"clearWave",value:function clearWave(){var _this3=this;util.frame(function(){_this3.canvases.forEach(function(entry){return entry.clearWave();});})();}},{key:"drawBars",value:function drawBars(peaks,channelIndex,start,end){var _this4=this;return this.prepareDraw(peaks,channelIndex,start,end,function(_ref){var absmax=_ref.absmax,hasMinVals=_ref.hasMinVals,height=_ref.height,offsetY=_ref.offsetY,halfH=_ref.halfH,peaks=_ref.peaks,ch=_ref.channelIndex;if(start===undefined){return;}
var peakIndexScale=hasMinVals?2:1;var length=peaks.length/peakIndexScale;var bar=_this4.params.barWidth*_this4.params.pixelRatio;var gap=_this4.params.barGap===null?Math.max(_this4.params.pixelRatio,~~(bar/2)):Math.max(_this4.params.pixelRatio,_this4.params.barGap*_this4.params.pixelRatio);var step=bar+gap;var scale=length/_this4.width;var first=start;var last=end;var i=first;for(i;i<last;i+=step){var peak=peaks[Math.floor(i*scale*peakIndexScale)]||0;var h=Math.round(peak/absmax*halfH);if(h==0&&_this4.params.barMinHeight)h=_this4.params.barMinHeight;_this4.fillRect(i+_this4.halfPixel,halfH-h+offsetY,bar+_this4.halfPixel,h*2,_this4.barRadius,ch);}});}},{key:"drawWave",value:function drawWave(peaks,channelIndex,start,end){var _this5=this;return this.prepareDraw(peaks,channelIndex,start,end,function(_ref2){var absmax=_ref2.absmax,hasMinVals=_ref2.hasMinVals,height=_ref2.height,offsetY=_ref2.offsetY,halfH=_ref2.halfH,peaks=_ref2.peaks,channelIndex=_ref2.channelIndex;if(!hasMinVals){var reflectedPeaks=[];var len=peaks.length;var i=0;for(i;i<len;i++){reflectedPeaks[2*i]=peaks[i];reflectedPeaks[2*i+1]=-peaks[i];}
peaks=reflectedPeaks;}
if(start!==undefined){_this5.drawLine(peaks,absmax,halfH,offsetY,start,end,channelIndex);}
_this5.fillRect(0,halfH+offsetY-_this5.halfPixel,_this5.width,_this5.halfPixel,_this5.barRadius,channelIndex);});}},{key:"drawLine",value:function drawLine(peaks,absmax,halfH,offsetY,start,end,channelIndex){var _this6=this;var _ref3=this.params.splitChannelsOptions.channelColors[channelIndex]||{},waveColor=_ref3.waveColor,progressColor=_ref3.progressColor;this.canvases.forEach(function(entry,i){_this6.setFillStyles(entry,waveColor,progressColor);entry.drawLines(peaks,absmax,halfH,offsetY,start,end);});}},{key:"fillRect",value:function fillRect(x,y,width,height,radius,channelIndex){var startCanvas=Math.floor(x/this.maxCanvasWidth);var endCanvas=Math.min(Math.ceil((x+width)/this.maxCanvasWidth)+1,this.canvases.length);var i=startCanvas;for(i;i<endCanvas;i++){var entry=this.canvases[i];var leftOffset=i*this.maxCanvasWidth;var intersection={x1:Math.max(x,i*this.maxCanvasWidth),y1:y,x2:Math.min(x+width,i*this.maxCanvasWidth+entry.wave.width),y2:y+height};if(intersection.x1<intersection.x2){var _ref4=this.params.splitChannelsOptions.channelColors[channelIndex]||{},waveColor=_ref4.waveColor,progressColor=_ref4.progressColor;this.setFillStyles(entry,waveColor,progressColor);entry.fillRects(intersection.x1-leftOffset,intersection.y1,intersection.x2-intersection.x1,intersection.y2-intersection.y1,radius);}}}},{key:"hideChannel",value:function hideChannel(channelIndex){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(channelIndex);}},{key:"prepareDraw",value:function prepareDraw(peaks,channelIndex,start,end,fn,drawIndex,normalizedMax){var _this7=this;return util.frame(function(){if(peaks[0]instanceof Array){var channels=peaks;if(_this7.params.splitChannels){var filteredChannels=channels.filter(function(c,i){return!_this7.hideChannel(i);});if(!_this7.params.splitChannelsOptions.overlay){_this7.setHeight(Math.max(filteredChannels.length,1)*_this7.params.height*_this7.params.pixelRatio);}
var overallAbsMax;if(_this7.params.splitChannelsOptions&&_this7.params.splitChannelsOptions.relativeNormalization){overallAbsMax=util.max(channels.map(function(channelPeaks){return util.absMax(channelPeaks);}));}
return channels.forEach(function(channelPeaks,i){return _this7.prepareDraw(channelPeaks,i,start,end,fn,filteredChannels.indexOf(channelPeaks),overallAbsMax);});}
peaks=channels[0];}
if(_this7.hideChannel(channelIndex)){return;}
var absmax=1/_this7.params.barHeight;if(_this7.params.normalize){absmax=normalizedMax===undefined?util.absMax(peaks):normalizedMax;}
var hasMinVals=[].some.call(peaks,function(val){return val<0;});var height=_this7.params.height*_this7.params.pixelRatio;var halfH=height/2;var offsetY=height*drawIndex||0;if(_this7.params.splitChannelsOptions&&_this7.params.splitChannelsOptions.overlay){offsetY=0;}
return fn({absmax:absmax,hasMinVals:hasMinVals,height:height,offsetY:offsetY,halfH:halfH,peaks:peaks,channelIndex:channelIndex});})();}},{key:"setFillStyles",value:function setFillStyles(entry){var waveColor=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this.params.waveColor;var progressColor=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this.params.progressColor;entry.setFillStyles(waveColor,progressColor);}},{key:"getImage",value:function getImage(format,quality,type){if(type==='blob'){return Promise.all(this.canvases.map(function(entry){return entry.getImage(format,quality,type);}));}else if(type==='dataURL'){var images=this.canvases.map(function(entry){return entry.getImage(format,quality,type);});return images.length>1?images:images[0];}}},{key:"updateProgress",value:function updateProgress(position){this.style(this.progressWave,{width:position+'px'});}}]);return MultiCanvas;}(_drawer.default);exports.default=MultiCanvas;module.exports=exports.default;}),"./src/mediaelement-webaudio.js":
/*!**************************************!*\
  !*** ./src/mediaelement-webaudio.js ***!
  \**************************************/
((module,exports,__webpack_require__)=>{"use strict";function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
Object.defineProperty(exports,"__esModule",({value:true}));exports.default=void 0;var _mediaelement=_interopRequireDefault(__webpack_require__(
/*! ./mediaelement */
"./src/mediaelement.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}
function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}
function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}
function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}
function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}
function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}
function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}
function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var MediaElementWebAudio=function(_MediaElement){_inherits(MediaElementWebAudio,_MediaElement);var _super=_createSuper(MediaElementWebAudio);function MediaElementWebAudio(params){var _this;_classCallCheck(this,MediaElementWebAudio);_this=_super.call(this,params);_this.params=params;_this.sourceMediaElement=null;return _this;}
_createClass(MediaElementWebAudio,[{key:"init",value:function init(){this.setPlaybackRate(this.params.audioRate);this.createTimer();this.createVolumeNode();this.createScriptNode();this.createAnalyserNode();}},{key:"_load",value:function _load(media,peaks,preload){_get(_getPrototypeOf(MediaElementWebAudio.prototype),"_load",this).call(this,media,peaks,preload);this.createMediaElementSource(media);}},{key:"createMediaElementSource",value:function createMediaElementSource(mediaElement){this.sourceMediaElement=this.ac.createMediaElementSource(mediaElement);this.sourceMediaElement.connect(this.analyser);}},{key:"play",value:function play(start,end){this.resumeAudioContext();return _get(_getPrototypeOf(MediaElementWebAudio.prototype),"play",this).call(this,start,end);}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(MediaElementWebAudio.prototype),"destroy",this).call(this);this.destroyWebAudio();}}]);return MediaElementWebAudio;}(_mediaelement.default);exports.default=MediaElementWebAudio;module.exports=exports.default;}),"./src/mediaelement.js":
/*!*****************************!*\
  !*** ./src/mediaelement.js ***!
  \*****************************/
((module,exports,__webpack_require__)=>{"use strict";function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
Object.defineProperty(exports,"__esModule",({value:true}));exports.default=void 0;var _webaudio=_interopRequireDefault(__webpack_require__(
/*! ./webaudio */
"./src/webaudio.js"));var util=_interopRequireWildcard(__webpack_require__(
/*! ./util */
"./src/util/index.js"));function _getRequireWildcardCache(){if(typeof WeakMap!=="function")return null;var cache=new WeakMap();_getRequireWildcardCache=function _getRequireWildcardCache(){return cache;};return cache;}
function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}
function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}
function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}
function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}
function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}
function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}
function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}
function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}
function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var MediaElement=function(_WebAudio){_inherits(MediaElement,_WebAudio);var _super=_createSuper(MediaElement);function MediaElement(params){var _this;_classCallCheck(this,MediaElement);_this=_super.call(this,params);_this.params=params;_this.media={currentTime:0,duration:0,paused:true,playbackRate:1,play:function play(){},pause:function pause(){},volume:0};_this.mediaType=params.mediaType.toLowerCase();_this.elementPosition=params.elementPosition;_this.peaks=null;_this.playbackRate=1;_this.volume=1;_this.isMuted=false;_this.buffer=null;_this.onPlayEnd=null;_this.mediaListeners={};return _this;}
_createClass(MediaElement,[{key:"init",value:function init(){this.setPlaybackRate(this.params.audioRate);this.createTimer();}},{key:"_setupMediaListeners",value:function _setupMediaListeners(){var _this2=this;this.mediaListeners.error=function(){_this2.fireEvent('error','Error loading media element');};this.mediaListeners.canplay=function(){_this2.fireEvent('canplay');};this.mediaListeners.ended=function(){_this2.fireEvent('finish');};this.mediaListeners.play=function(){_this2.fireEvent('play');};this.mediaListeners.pause=function(){_this2.fireEvent('pause');};this.mediaListeners.seeked=function(event){_this2.fireEvent('seek');};this.mediaListeners.volumechange=function(event){_this2.isMuted=_this2.media.muted;if(_this2.isMuted){_this2.volume=0;}else{_this2.volume=_this2.media.volume;}
_this2.fireEvent('volume');};Object.keys(this.mediaListeners).forEach(function(id){_this2.media.removeEventListener(id,_this2.mediaListeners[id]);_this2.media.addEventListener(id,_this2.mediaListeners[id]);});}},{key:"createTimer",value:function createTimer(){var _this3=this;var onAudioProcess=function onAudioProcess(){if(_this3.isPaused()){return;}
_this3.fireEvent('audioprocess',_this3.getCurrentTime());util.frame(onAudioProcess)();};this.on('play',onAudioProcess);this.on('pause',function(){_this3.fireEvent('audioprocess',_this3.getCurrentTime());});}},{key:"load",value:function load(url,container,peaks,preload){var media=document.createElement(this.mediaType);media.controls=this.params.mediaControls;media.autoplay=this.params.autoplay||false;media.preload=preload==null?'auto':preload;media.src=url;media.style.width='100%';var prevMedia=container.querySelector(this.mediaType);if(prevMedia){container.removeChild(prevMedia);}
container.appendChild(media);this._load(media,peaks,preload);}},{key:"loadElt",value:function loadElt(elt,peaks){elt.controls=this.params.mediaControls;elt.autoplay=this.params.autoplay||false;this._load(elt,peaks,elt.preload);}},{key:"_load",value:function _load(media,peaks,preload){if(!(media instanceof HTMLMediaElement)||typeof media.addEventListener==='undefined'){throw new Error('media parameter is not a valid media element');}
if(typeof media.load=='function'&&!(peaks&&preload=='none')){media.load();}
this.media=media;this._setupMediaListeners();this.peaks=peaks;this.onPlayEnd=null;this.buffer=null;this.isMuted=media.muted;this.setPlaybackRate(this.playbackRate);this.setVolume(this.volume);}},{key:"isPaused",value:function isPaused(){return!this.media||this.media.paused;}},{key:"getDuration",value:function getDuration(){if(this.explicitDuration){return this.explicitDuration;}
var duration=(this.buffer||this.media).duration;if(duration>=Infinity){duration=this.media.seekable.end(0);}
return duration;}},{key:"getCurrentTime",value:function getCurrentTime(){return this.media&&this.media.currentTime;}},{key:"getPlayedPercents",value:function getPlayedPercents(){return this.getCurrentTime()/this.getDuration()||0;}},{key:"getPlaybackRate",value:function getPlaybackRate(){return this.playbackRate||this.media.playbackRate;}},{key:"setPlaybackRate",value:function setPlaybackRate(value){this.playbackRate=value||1;this.media.playbackRate=this.playbackRate;}},{key:"seekTo",value:function seekTo(start){if(start!=null){this.media.currentTime=start;}
this.clearPlayEnd();}},{key:"play",value:function play(start,end){this.seekTo(start);var promise=this.media.play();end&&this.setPlayEnd(end);return promise;}},{key:"pause",value:function pause(){var promise;if(this.media){promise=this.media.pause();}
this.clearPlayEnd();return promise;}},{key:"setPlayEnd",value:function setPlayEnd(end){var _this4=this;this.clearPlayEnd();this._onPlayEnd=function(time){if(time>=end){_this4.pause();_this4.seekTo(end);}};this.on('audioprocess',this._onPlayEnd);}},{key:"clearPlayEnd",value:function clearPlayEnd(){if(this._onPlayEnd){this.un('audioprocess',this._onPlayEnd);this._onPlayEnd=null;}}},{key:"getPeaks",value:function getPeaks(length,first,last){if(this.buffer){return _get(_getPrototypeOf(MediaElement.prototype),"getPeaks",this).call(this,length,first,last);}
return this.peaks||[];}},{key:"setSinkId",value:function setSinkId(deviceId){if(deviceId){if(!this.media.setSinkId){return Promise.reject(new Error('setSinkId is not supported in your browser'));}
return this.media.setSinkId(deviceId);}
return Promise.reject(new Error('Invalid deviceId: '+deviceId));}},{key:"getVolume",value:function getVolume(){return this.volume;}},{key:"setVolume",value:function setVolume(value){this.volume=value;if(this.media.volume!==this.volume){this.media.volume=this.volume;}}},{key:"setMute",value:function setMute(muted){this.isMuted=this.media.muted=muted;}},{key:"destroy",value:function destroy(){var _this5=this;this.pause();this.unAll();this.destroyed=true;Object.keys(this.mediaListeners).forEach(function(id){if(_this5.media){_this5.media.removeEventListener(id,_this5.mediaListeners[id]);}});if(this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode){this.media.parentNode.removeChild(this.media);}
this.media=null;}}]);return MediaElement;}(_webaudio.default);exports.default=MediaElement;module.exports=exports.default;}),"./src/peakcache.js":
/*!**************************!*\
  !*** ./src/peakcache.js ***!
  \**************************/
((module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",({value:true}));exports.default=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
var PeakCache=function(){function PeakCache(){_classCallCheck(this,PeakCache);this.clearPeakCache();}
_createClass(PeakCache,[{key:"clearPeakCache",value:function clearPeakCache(){this.peakCacheRanges=[];this.peakCacheLength=-1;}},{key:"addRangeToPeakCache",value:function addRangeToPeakCache(length,start,end){if(length!=this.peakCacheLength){this.clearPeakCache();this.peakCacheLength=length;}
var uncachedRanges=[];var i=0;while(i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<start){i++;}
if(i%2==0){uncachedRanges.push(start);}
while(i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<=end){uncachedRanges.push(this.peakCacheRanges[i]);i++;}
if(i%2==0){uncachedRanges.push(end);}
uncachedRanges=uncachedRanges.filter(function(item,pos,arr){if(pos==0){return item!=arr[pos+1];}else if(pos==arr.length-1){return item!=arr[pos-1];}
return item!=arr[pos-1]&&item!=arr[pos+1];});this.peakCacheRanges=this.peakCacheRanges.concat(uncachedRanges);this.peakCacheRanges=this.peakCacheRanges.sort(function(a,b){return a-b;}).filter(function(item,pos,arr){if(pos==0){return item!=arr[pos+1];}else if(pos==arr.length-1){return item!=arr[pos-1];}
return item!=arr[pos-1]&&item!=arr[pos+1];});var uncachedRangePairs=[];for(i=0;i<uncachedRanges.length;i+=2){uncachedRangePairs.push([uncachedRanges[i],uncachedRanges[i+1]]);}
return uncachedRangePairs;}},{key:"getCacheRanges",value:function getCacheRanges(){var peakCacheRangePairs=[];var i;for(i=0;i<this.peakCacheRanges.length;i+=2){peakCacheRangePairs.push([this.peakCacheRanges[i],this.peakCacheRanges[i+1]]);}
return peakCacheRangePairs;}}]);return PeakCache;}();exports.default=PeakCache;module.exports=exports.default;}),"./src/util/absMax.js":
/*!****************************!*\
  !*** ./src/util/absMax.js ***!
  \****************************/
((module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",({value:true}));exports.default=absMax;var _max=_interopRequireDefault(__webpack_require__(
/*! ./max */
"./src/util/max.js"));var _min=_interopRequireDefault(__webpack_require__(
/*! ./min */
"./src/util/min.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}
function absMax(values){var max=(0,_max.default)(values);var min=(0,_min.default)(values);return-min>max?-min:max;}
module.exports=exports.default;}),"./src/util/clamp.js":
/*!***************************!*\
  !*** ./src/util/clamp.js ***!
  \***************************/
((module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",({value:true}));exports.default=clamp;function clamp(val,min,max){return Math.min(Math.max(min,val),max);}
module.exports=exports.default;}),"./src/util/fetch.js":
/*!***************************!*\
  !*** ./src/util/fetch.js ***!
  \***************************/
((module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",({value:true}));exports.default=fetchFile;var _observer=_interopRequireDefault(__webpack_require__(
/*! ./observer */
"./src/util/observer.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
var ProgressHandler=function(){function ProgressHandler(instance,contentLength,response){_classCallCheck(this,ProgressHandler);this.instance=instance;this.instance._reader=response.body.getReader();this.total=parseInt(contentLength,10);this.loaded=0;}
_createClass(ProgressHandler,[{key:"start",value:function start(controller){var _this=this;var read=function read(){_this.instance._reader.read().then(function(_ref){var done=_ref.done,value=_ref.value;if(done){if(_this.total===0){_this.instance.onProgress.call(_this.instance,{loaded:_this.loaded,total:_this.total,lengthComputable:false});}
controller.close();return;}
_this.loaded+=value.byteLength;_this.instance.onProgress.call(_this.instance,{loaded:_this.loaded,total:_this.total,lengthComputable:!(_this.total===0)});controller.enqueue(value);read();}).catch(function(error){controller.error(error);});};read();}}]);return ProgressHandler;}();function fetchFile(options){if(!options){throw new Error('fetch options missing');}else if(!options.url){throw new Error('fetch url missing');}
var instance=new _observer.default();var fetchHeaders=new Headers();var fetchRequest=new Request(options.url);instance.controller=new AbortController();if(options&&options.requestHeaders){options.requestHeaders.forEach(function(header){fetchHeaders.append(header.key,header.value);});}
var responseType=options.responseType||'json';var fetchOptions={method:options.method||'GET',headers:fetchHeaders,mode:options.mode||'cors',credentials:options.credentials||'same-origin',cache:options.cache||'default',redirect:options.redirect||'follow',referrer:options.referrer||'client',signal:instance.controller.signal};fetch(fetchRequest,fetchOptions).then(function(response){instance.response=response;var progressAvailable=true;if(!response.body){progressAvailable=false;}
var contentLength=response.headers.get('content-length');if(contentLength===null){progressAvailable=false;}
if(!progressAvailable){return response;}
instance.onProgress=function(e){instance.fireEvent('progress',e);};return new Response(new ReadableStream(new ProgressHandler(instance,contentLength,response)),fetchOptions);}).then(function(response){var errMsg;if(response.ok){switch(responseType){case'arraybuffer':return response.arrayBuffer();case'json':return response.json();case'blob':return response.blob();case'text':return response.text();default:errMsg='Unknown responseType: '+responseType;break;}}
if(!errMsg){errMsg='HTTP error status: '+response.status;}
throw new Error(errMsg);}).then(function(response){instance.fireEvent('success',response);}).catch(function(error){instance.fireEvent('error',error);});instance.fetchRequest=fetchRequest;return instance;}
module.exports=exports.default;}),"./src/util/frame.js":
/*!***************************!*\
  !*** ./src/util/frame.js ***!
  \***************************/
((module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",({value:true}));exports.default=frame;var _requestAnimationFrame=_interopRequireDefault(__webpack_require__(
/*! ./request-animation-frame */
"./src/util/request-animation-frame.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}
function frame(func){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
return(0,_requestAnimationFrame.default)(function(){return func.apply(void 0,args);});};}
module.exports=exports.default;}),"./src/util/get-id.js":
/*!****************************!*\
  !*** ./src/util/get-id.js ***!
  \****************************/
((module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",({value:true}));exports.default=getId;function getId(prefix){if(prefix===undefined){prefix='wavesurfer_';}
return prefix+Math.random().toString(32).substring(2);}
module.exports=exports.default;}),"./src/util/index.js":
/*!***************************!*\
  !*** ./src/util/index.js ***!
  \***************************/
((__unused_webpack_module,exports,__webpack_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",({value:true}));Object.defineProperty(exports,"getId",({enumerable:true,get:function get(){return _getId.default;}}));Object.defineProperty(exports,"max",({enumerable:true,get:function get(){return _max.default;}}));Object.defineProperty(exports,"min",({enumerable:true,get:function get(){return _min.default;}}));Object.defineProperty(exports,"absMax",({enumerable:true,get:function get(){return _absMax.default;}}));Object.defineProperty(exports,"Observer",({enumerable:true,get:function get(){return _observer.default;}}));Object.defineProperty(exports,"style",({enumerable:true,get:function get(){return _style.default;}}));Object.defineProperty(exports,"requestAnimationFrame",({enumerable:true,get:function get(){return _requestAnimationFrame.default;}}));Object.defineProperty(exports,"frame",({enumerable:true,get:function get(){return _frame.default;}}));Object.defineProperty(exports,"debounce",({enumerable:true,get:function get(){return _debounce.default;}}));Object.defineProperty(exports,"preventClick",({enumerable:true,get:function get(){return _preventClick.default;}}));Object.defineProperty(exports,"fetchFile",({enumerable:true,get:function get(){return _fetch.default;}}));Object.defineProperty(exports,"clamp",({enumerable:true,get:function get(){return _clamp.default;}}));var _getId=_interopRequireDefault(__webpack_require__(
/*! ./get-id */
"./src/util/get-id.js"));var _max=_interopRequireDefault(__webpack_require__(
/*! ./max */
"./src/util/max.js"));var _min=_interopRequireDefault(__webpack_require__(
/*! ./min */
"./src/util/min.js"));var _absMax=_interopRequireDefault(__webpack_require__(
/*! ./absMax */
"./src/util/absMax.js"));var _observer=_interopRequireDefault(__webpack_require__(
/*! ./observer */
"./src/util/observer.js"));var _style=_interopRequireDefault(__webpack_require__(
/*! ./style */
"./src/util/style.js"));var _requestAnimationFrame=_interopRequireDefault(__webpack_require__(
/*! ./request-animation-frame */
"./src/util/request-animation-frame.js"));var _frame=_interopRequireDefault(__webpack_require__(
/*! ./frame */
"./src/util/frame.js"));var _debounce=_interopRequireDefault(__webpack_require__(
/*! debounce */
"./node_modules/debounce/index.js"));var _preventClick=_interopRequireDefault(__webpack_require__(
/*! ./prevent-click */
"./src/util/prevent-click.js"));var _fetch=_interopRequireDefault(__webpack_require__(
/*! ./fetch */
"./src/util/fetch.js"));var _clamp=_interopRequireDefault(__webpack_require__(
/*! ./clamp */
"./src/util/clamp.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}}),"./src/util/max.js":
/*!*************************!*\
  !*** ./src/util/max.js ***!
  \*************************/
((module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",({value:true}));exports.default=max;function max(values){var largest=-Infinity;Object.keys(values).forEach(function(i){if(values[i]>largest){largest=values[i];}});return largest;}
module.exports=exports.default;}),"./src/util/min.js":
/*!*************************!*\
  !*** ./src/util/min.js ***!
  \*************************/
((module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",({value:true}));exports.default=min;function min(values){var smallest=Number(Infinity);Object.keys(values).forEach(function(i){if(values[i]<smallest){smallest=values[i];}});return smallest;}
module.exports=exports.default;}),"./src/util/observer.js":
/*!******************************!*\
  !*** ./src/util/observer.js ***!
  \******************************/
((module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",({value:true}));exports.default=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
var Observer=function(){function Observer(){_classCallCheck(this,Observer);this._disabledEventEmissions=[];this.handlers=null;}
_createClass(Observer,[{key:"on",value:function on(event,fn){var _this=this;if(!this.handlers){this.handlers={};}
var handlers=this.handlers[event];if(!handlers){handlers=this.handlers[event]=[];}
handlers.push(fn);return{name:event,callback:fn,un:function un(e,fn){return _this.un(e,fn);}};}},{key:"un",value:function un(event,fn){if(!this.handlers){return;}
var handlers=this.handlers[event];var i;if(handlers){if(fn){for(i=handlers.length-1;i>=0;i--){if(handlers[i]==fn){handlers.splice(i,1);}}}else{handlers.length=0;}}}},{key:"unAll",value:function unAll(){this.handlers=null;}},{key:"once",value:function once(event,handler){var _this2=this;var fn=function fn(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
handler.apply(_this2,args);setTimeout(function(){_this2.un(event,fn);},0);};return this.on(event,fn);}},{key:"setDisabledEventEmissions",value:function setDisabledEventEmissions(eventNames){this._disabledEventEmissions=eventNames;}},{key:"_isDisabledEventEmission",value:function _isDisabledEventEmission(event){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(event);}},{key:"fireEvent",value:function fireEvent(event){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){args[_key2-1]=arguments[_key2];}
if(!this.handlers||this._isDisabledEventEmission(event)){return;}
var handlers=this.handlers[event];handlers&&handlers.forEach(function(fn){fn.apply(void 0,args);});}}]);return Observer;}();exports.default=Observer;module.exports=exports.default;}),"./src/util/prevent-click.js":
/*!***********************************!*\
  !*** ./src/util/prevent-click.js ***!
  \***********************************/
((module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",({value:true}));exports.default=preventClick;function preventClickHandler(event){event.stopPropagation();document.body.removeEventListener('click',preventClickHandler,true);}
function preventClick(values){document.body.addEventListener('click',preventClickHandler,true);}
module.exports=exports.default;}),"./src/util/request-animation-frame.js":
/*!*********************************************!*\
  !*** ./src/util/request-animation-frame.js ***!
  \*********************************************/
((module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",({value:true}));exports.default=void 0;var _default=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback,element){return setTimeout(callback,1000/60);}).bind(window);exports.default=_default;module.exports=exports.default;}),"./src/util/style.js":
/*!***************************!*\
  !*** ./src/util/style.js ***!
  \***************************/
((module,exports)=>{"use strict";Object.defineProperty(exports,"__esModule",({value:true}));exports.default=style;function style(el,styles){Object.keys(styles).forEach(function(prop){if(el.style[prop]!==styles[prop]){el.style[prop]=styles[prop];}});return el;}
module.exports=exports.default;}),"./src/wavesurfer.js":
/*!***************************!*\
  !*** ./src/wavesurfer.js ***!
  \***************************/
((module,exports,__webpack_require__)=>{"use strict";function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
Object.defineProperty(exports,"__esModule",({value:true}));exports.default=void 0;var util=_interopRequireWildcard(__webpack_require__(
/*! ./util */
"./src/util/index.js"));var _drawer=_interopRequireDefault(__webpack_require__(
/*! ./drawer.multicanvas */
"./src/drawer.multicanvas.js"));var _webaudio=_interopRequireDefault(__webpack_require__(
/*! ./webaudio */
"./src/webaudio.js"));var _mediaelement=_interopRequireDefault(__webpack_require__(
/*! ./mediaelement */
"./src/mediaelement.js"));var _peakcache=_interopRequireDefault(__webpack_require__(
/*! ./peakcache */
"./src/peakcache.js"));var _mediaelementWebaudio=_interopRequireDefault(__webpack_require__(
/*! ./mediaelement-webaudio */
"./src/mediaelement-webaudio.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}
function _getRequireWildcardCache(){if(typeof WeakMap!=="function")return null;var cache=new WeakMap();_getRequireWildcardCache=function _getRequireWildcardCache(){return cache;};return cache;}
function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}
function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}
function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}
function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}
function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}
function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}
function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
var PluginClass=function(){function PluginClass(params,ws){_classCallCheck(this,PluginClass);}
_createClass(PluginClass,[{key:"create",value:function create(params){}},{key:"init",value:function init(){}},{key:"destroy",value:function destroy(){}}]);return PluginClass;}();var WaveSurfer=function(_util$Observer){_inherits(WaveSurfer,_util$Observer);var _super=_createSuper(WaveSurfer);function WaveSurfer(params){var _this;_classCallCheck(this,WaveSurfer);_this=_super.call(this);_this.defaultParams={audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:true,autoCenterRate:5,autoCenterImmediately:false,backend:'WebAudio',backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:'#333',cursorWidth:1,dragSelection:true,drawingContextAttributes:{desynchronized:false},duration:null,fillParent:true,forceDecode:false,height:128,hideScrollbar:false,interact:true,loopSelection:true,maxCanvasWidth:4000,mediaContainer:null,mediaControls:false,mediaType:'audio',minPxPerSec:20,normalize:false,partialRender:false,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:'#555',removeMediaElementOnDestroy:true,renderer:_drawer.default,responsive:false,rtl:false,scrollParent:false,skipLength:2,splitChannels:false,splitChannelsOptions:{overlay:false,channelColors:{},filterChannels:[],relativeNormalization:false},waveColor:'#999',xhr:{}};_this.backends={MediaElement:_mediaelement.default,WebAudio:_webaudio.default,MediaElementWebAudio:_mediaelementWebaudio.default};_this.util=util;_this.params=Object.assign({},_this.defaultParams,params);_this.params.splitChannelsOptions=Object.assign({},_this.defaultParams.splitChannelsOptions,params.splitChannelsOptions);_this.container='string'==typeof params.container?document.querySelector(_this.params.container):_this.params.container;if(!_this.container){throw new Error('Container element not found');}
if(_this.params.mediaContainer==null){_this.mediaContainer=_this.container;}else if(typeof _this.params.mediaContainer=='string'){_this.mediaContainer=document.querySelector(_this.params.mediaContainer);}else{_this.mediaContainer=_this.params.mediaContainer;}
if(!_this.mediaContainer){throw new Error('Media Container element not found');}
if(_this.params.maxCanvasWidth<=1){throw new Error('maxCanvasWidth must be greater than 1');}else if(_this.params.maxCanvasWidth%2==1){throw new Error('maxCanvasWidth must be an even number');}
if(_this.params.rtl===true){util.style(_this.container,{transform:'rotateY(180deg)'});}
if(_this.params.backgroundColor){_this.setBackgroundColor(_this.params.backgroundColor);}
_this.savedVolume=0;_this.isMuted=false;_this.tmpEvents=[];_this.currentRequest=null;_this.arraybuffer=null;_this.drawer=null;_this.backend=null;_this.peakCache=null;if(typeof _this.params.renderer!=='function'){throw new Error('Renderer parameter is invalid');}
_this.Drawer=_this.params.renderer;if(_this.params.backend=='AudioElement'){_this.params.backend='MediaElement';}
if((_this.params.backend=='WebAudio'||_this.params.backend==='MediaElementWebAudio')&&!_webaudio.default.prototype.supportsWebAudio.call(null)){_this.params.backend='MediaElement';}
_this.Backend=_this.backends[_this.params.backend];_this.initialisedPluginList={};_this.isDestroyed=false;_this.isReady=false;var prevWidth=0;_this._onResize=util.debounce(function(){if(prevWidth!=_this.drawer.wrapper.clientWidth&&!_this.params.scrollParent){prevWidth=_this.drawer.wrapper.clientWidth;_this.drawer.fireEvent('redraw');}},typeof _this.params.responsive==='number'?_this.params.responsive:100);return _possibleConstructorReturn(_this,_assertThisInitialized(_this));}
_createClass(WaveSurfer,[{key:"init",value:function init(){this.registerPlugins(this.params.plugins);this.createDrawer();this.createBackend();this.createPeakCache();return this;}},{key:"registerPlugins",value:function registerPlugins(plugins){var _this2=this;plugins.forEach(function(plugin){return _this2.addPlugin(plugin);});plugins.forEach(function(plugin){if(!plugin.deferInit){_this2.initPlugin(plugin.name);}});this.fireEvent('plugins-registered',plugins);return this;}},{key:"getActivePlugins",value:function getActivePlugins(){return this.initialisedPluginList;}},{key:"addPlugin",value:function addPlugin(plugin){var _this3=this;if(!plugin.name){throw new Error('Plugin does not have a name!');}
if(!plugin.instance){throw new Error("Plugin ".concat(plugin.name," does not have an instance property!"));}
if(plugin.staticProps){Object.keys(plugin.staticProps).forEach(function(pluginStaticProp){_this3[pluginStaticProp]=plugin.staticProps[pluginStaticProp];});}
var Instance=plugin.instance;var observerPrototypeKeys=Object.getOwnPropertyNames(util.Observer.prototype);observerPrototypeKeys.forEach(function(key){Instance.prototype[key]=util.Observer.prototype[key];});this[plugin.name]=new Instance(plugin.params||{},this);this.fireEvent('plugin-added',plugin.name);return this;}},{key:"initPlugin",value:function initPlugin(name){if(!this[name]){throw new Error("Plugin ".concat(name," has not been added yet!"));}
if(this.initialisedPluginList[name]){this.destroyPlugin(name);}
this[name].init();this.initialisedPluginList[name]=true;this.fireEvent('plugin-initialised',name);return this;}},{key:"destroyPlugin",value:function destroyPlugin(name){if(!this[name]){throw new Error("Plugin ".concat(name," has not been added yet and cannot be destroyed!"));}
if(!this.initialisedPluginList[name]){throw new Error("Plugin ".concat(name," is not active and cannot be destroyed!"));}
if(typeof this[name].destroy!=='function'){throw new Error("Plugin ".concat(name," does not have a destroy function!"));}
this[name].destroy();delete this.initialisedPluginList[name];this.fireEvent('plugin-destroyed',name);return this;}},{key:"destroyAllPlugins",value:function destroyAllPlugins(){var _this4=this;Object.keys(this.initialisedPluginList).forEach(function(name){return _this4.destroyPlugin(name);});}},{key:"createDrawer",value:function createDrawer(){var _this5=this;this.drawer=new this.Drawer(this.container,this.params);this.drawer.init();this.fireEvent('drawer-created',this.drawer);if(this.params.responsive!==false){window.addEventListener('resize',this._onResize,true);window.addEventListener('orientationchange',this._onResize,true);}
this.drawer.on('redraw',function(){_this5.drawBuffer();_this5.drawer.progress(_this5.backend.getPlayedPercents());});this.drawer.on('click',function(e,progress){setTimeout(function(){return _this5.seekTo(progress);},0);});this.drawer.on('scroll',function(e){if(_this5.params.partialRender){_this5.drawBuffer();}
_this5.fireEvent('scroll',e);});}},{key:"createBackend",value:function createBackend(){var _this6=this;if(this.backend){this.backend.destroy();}
this.backend=new this.Backend(this.params);this.backend.init();this.fireEvent('backend-created',this.backend);this.backend.on('finish',function(){_this6.drawer.progress(_this6.backend.getPlayedPercents());_this6.fireEvent('finish');});this.backend.on('play',function(){return _this6.fireEvent('play');});this.backend.on('pause',function(){return _this6.fireEvent('pause');});this.backend.on('audioprocess',function(time){_this6.drawer.progress(_this6.backend.getPlayedPercents());_this6.fireEvent('audioprocess',time);});if(this.params.backend==='MediaElement'||this.params.backend==='MediaElementWebAudio'){this.backend.on('seek',function(){_this6.drawer.progress(_this6.backend.getPlayedPercents());});this.backend.on('volume',function(){var newVolume=_this6.getVolume();_this6.fireEvent('volume',newVolume);if(_this6.backend.isMuted!==_this6.isMuted){_this6.isMuted=_this6.backend.isMuted;_this6.fireEvent('mute',_this6.isMuted);}});}}},{key:"createPeakCache",value:function createPeakCache(){if(this.params.partialRender){this.peakCache=new _peakcache.default();}}},{key:"getDuration",value:function getDuration(){return this.backend.getDuration();}},{key:"getCurrentTime",value:function getCurrentTime(){return this.backend.getCurrentTime();}},{key:"setCurrentTime",value:function setCurrentTime(seconds){if(seconds>=this.getDuration()){this.seekTo(1);}else{this.seekTo(seconds/this.getDuration());}}},{key:"play",value:function play(start,end){var _this7=this;this.fireEvent('interaction',function(){return _this7.play(start,end);});return this.backend.play(start,end);}},{key:"setPlayEnd",value:function setPlayEnd(position){this.backend.setPlayEnd(position);}},{key:"pause",value:function pause(){if(!this.backend.isPaused()){return this.backend.pause();}}},{key:"playPause",value:function playPause(){return this.backend.isPaused()?this.play():this.pause();}},{key:"isPlaying",value:function isPlaying(){return!this.backend.isPaused();}},{key:"skipBackward",value:function skipBackward(seconds){this.skip(-seconds||-this.params.skipLength);}},{key:"skipForward",value:function skipForward(seconds){this.skip(seconds||this.params.skipLength);}},{key:"skip",value:function skip(offset){var duration=this.getDuration()||1;var position=this.getCurrentTime()||0;position=Math.max(0,Math.min(duration,position+(offset||0)));this.seekAndCenter(position/duration);}},{key:"seekAndCenter",value:function seekAndCenter(progress){this.seekTo(progress);this.drawer.recenter(progress);}},{key:"seekTo",value:function seekTo(progress){var _this8=this;if(typeof progress!=='number'||!isFinite(progress)||progress<0||progress>1){throw new Error('Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!');}
this.fireEvent('interaction',function(){return _this8.seekTo(progress);});var isWebAudioBackend=this.params.backend==='WebAudio';var paused=this.backend.isPaused();if(isWebAudioBackend&&!paused){this.backend.pause();}
var oldScrollParent=this.params.scrollParent;this.params.scrollParent=false;this.backend.seekTo(progress*this.getDuration());this.drawer.progress(progress);if(isWebAudioBackend&&!paused){this.backend.play();}
this.params.scrollParent=oldScrollParent;this.fireEvent('seek',progress);}},{key:"stop",value:function stop(){this.pause();this.seekTo(0);this.drawer.progress(0);}},{key:"setSinkId",value:function setSinkId(deviceId){return this.backend.setSinkId(deviceId);}},{key:"setVolume",value:function setVolume(newVolume){this.backend.setVolume(newVolume);this.fireEvent('volume',newVolume);}},{key:"getVolume",value:function getVolume(){return this.backend.getVolume();}},{key:"setPlaybackRate",value:function setPlaybackRate(rate){this.backend.setPlaybackRate(rate);}},{key:"getPlaybackRate",value:function getPlaybackRate(){return this.backend.getPlaybackRate();}},{key:"toggleMute",value:function toggleMute(){this.setMute(!this.isMuted);}},{key:"setMute",value:function setMute(mute){if(mute===this.isMuted){this.fireEvent('mute',this.isMuted);return;}
if(this.backend.setMute){this.backend.setMute(mute);this.isMuted=mute;}else{if(mute){this.savedVolume=this.backend.getVolume();this.backend.setVolume(0);this.isMuted=true;this.fireEvent('volume',0);}else{this.backend.setVolume(this.savedVolume);this.isMuted=false;this.fireEvent('volume',this.savedVolume);}}
this.fireEvent('mute',this.isMuted);}},{key:"getMute",value:function getMute(){return this.isMuted;}},{key:"getFilters",value:function getFilters(){return this.backend.filters||[];}},{key:"toggleScroll",value:function toggleScroll(){this.params.scrollParent=!this.params.scrollParent;this.drawBuffer();}},{key:"toggleInteraction",value:function toggleInteraction(){this.params.interact=!this.params.interact;}},{key:"getWaveColor",value:function getWaveColor(){return this.params.waveColor;}},{key:"setWaveColor",value:function setWaveColor(color){this.params.waveColor=color;this.drawBuffer();}},{key:"getProgressColor",value:function getProgressColor(){return this.params.progressColor;}},{key:"setProgressColor",value:function setProgressColor(color){this.params.progressColor=color;this.drawBuffer();}},{key:"getBackgroundColor",value:function getBackgroundColor(){return this.params.backgroundColor;}},{key:"setBackgroundColor",value:function setBackgroundColor(color){this.params.backgroundColor=color;util.style(this.container,{background:this.params.backgroundColor});}},{key:"getCursorColor",value:function getCursorColor(){return this.params.cursorColor;}},{key:"setCursorColor",value:function setCursorColor(color){this.params.cursorColor=color;this.drawer.updateCursor();}},{key:"getHeight",value:function getHeight(){return this.params.height;}},{key:"setHeight",value:function setHeight(height){this.params.height=height;this.drawer.setHeight(height*this.params.pixelRatio);this.drawBuffer();}},{key:"setFilteredChannels",value:function setFilteredChannels(channelIndices){this.params.splitChannelsOptions.filterChannels=channelIndices;this.drawBuffer();}},{key:"drawBuffer",value:function drawBuffer(){var nominalWidth=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio);var parentWidth=this.drawer.getWidth();var width=nominalWidth;var start=0;var end=Math.max(start+parentWidth,width);if(this.params.fillParent&&(!this.params.scrollParent||nominalWidth<parentWidth)){width=parentWidth;start=0;end=width;}
var peaks;if(this.params.partialRender){var newRanges=this.peakCache.addRangeToPeakCache(width,start,end);var i;for(i=0;i<newRanges.length;i++){peaks=this.backend.getPeaks(width,newRanges[i][0],newRanges[i][1]);this.drawer.drawPeaks(peaks,width,newRanges[i][0],newRanges[i][1]);}}else{peaks=this.backend.getPeaks(width,start,end);this.drawer.drawPeaks(peaks,width,start,end);}
this.fireEvent('redraw',peaks,width);}},{key:"zoom",value:function zoom(pxPerSec){if(!pxPerSec){this.params.minPxPerSec=this.defaultParams.minPxPerSec;this.params.scrollParent=false;}else{this.params.minPxPerSec=pxPerSec;this.params.scrollParent=true;}
this.drawBuffer();this.drawer.progress(this.backend.getPlayedPercents());this.drawer.recenter(this.getCurrentTime()/this.getDuration());this.fireEvent('zoom',pxPerSec);}},{key:"loadArrayBuffer",value:function loadArrayBuffer(arraybuffer){var _this9=this;this.decodeArrayBuffer(arraybuffer,function(data){if(!_this9.isDestroyed){_this9.loadDecodedBuffer(data);}});}},{key:"loadDecodedBuffer",value:function loadDecodedBuffer(buffer){this.backend.load(buffer);this.drawBuffer();this.isReady=true;this.fireEvent('ready');}},{key:"loadBlob",value:function loadBlob(blob){var _this10=this;var reader=new FileReader();reader.addEventListener('progress',function(e){return _this10.onProgress(e);});reader.addEventListener('load',function(e){return _this10.loadArrayBuffer(e.target.result);});reader.addEventListener('error',function(){return _this10.fireEvent('error','Error reading file');});reader.readAsArrayBuffer(blob);this.empty();}},{key:"load",value:function load(url,peaks,preload,duration){if(!url){throw new Error('url parameter cannot be empty');}
this.empty();if(preload){var preloadIgnoreReasons={"Preload is not 'auto', 'none' or 'metadata'":['auto','metadata','none'].indexOf(preload)===-1,'Peaks are not provided':!peaks,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":['MediaElement','MediaElementWebAudio'].indexOf(this.params.backend)===-1,'Url is not of type string':typeof url!=='string'};var activeReasons=Object.keys(preloadIgnoreReasons).filter(function(reason){return preloadIgnoreReasons[reason];});if(activeReasons.length){console.warn('Preload parameter of wavesurfer.load will be ignored because:\n\t- '+activeReasons.join('\n\t- '));preload=null;}}
if(this.params.backend==='WebAudio'&&url instanceof HTMLMediaElement){url=url.src;}
switch(this.params.backend){case'WebAudio':return this.loadBuffer(url,peaks,duration);case'MediaElement':case'MediaElementWebAudio':return this.loadMediaElement(url,peaks,preload,duration);}}},{key:"loadBuffer",value:function loadBuffer(url,peaks,duration){var _this11=this;var load=function load(action){if(action){_this11.tmpEvents.push(_this11.once('ready',action));}
return _this11.getArrayBuffer(url,function(data){return _this11.loadArrayBuffer(data);});};if(peaks){this.backend.setPeaks(peaks,duration);this.drawBuffer();this.fireEvent('waveform-ready');this.tmpEvents.push(this.once('interaction',load));}else{return load();}}},{key:"loadMediaElement",value:function loadMediaElement(urlOrElt,peaks,preload,duration){var _this12=this;var url=urlOrElt;if(typeof urlOrElt==='string'){this.backend.load(url,this.mediaContainer,peaks,preload);}else{var elt=urlOrElt;this.backend.loadElt(elt,peaks);url=elt.src;}
this.tmpEvents.push(this.backend.once('canplay',function(){if(!_this12.backend.destroyed){_this12.drawBuffer();_this12.isReady=true;_this12.fireEvent('ready');}}),this.backend.once('error',function(err){return _this12.fireEvent('error',err);}));if(peaks){this.backend.setPeaks(peaks,duration);this.drawBuffer();this.fireEvent('waveform-ready');}
if((!peaks||this.params.forceDecode)&&this.backend.supportsWebAudio()){this.getArrayBuffer(url,function(arraybuffer){_this12.decodeArrayBuffer(arraybuffer,function(buffer){_this12.backend.buffer=buffer;_this12.backend.setPeaks(null);_this12.drawBuffer();_this12.fireEvent('waveform-ready');});});}}},{key:"decodeArrayBuffer",value:function decodeArrayBuffer(arraybuffer,callback){var _this13=this;this.arraybuffer=arraybuffer;this.backend.decodeArrayBuffer(arraybuffer,function(data){if(!_this13.isDestroyed&&_this13.arraybuffer==arraybuffer){callback(data);_this13.arraybuffer=null;}},function(){return _this13.fireEvent('error','Error decoding audiobuffer');});}},{key:"getArrayBuffer",value:function getArrayBuffer(url,callback){var _this14=this;var options=Object.assign({url:url,responseType:'arraybuffer'},this.params.xhr);var request=util.fetchFile(options);this.currentRequest=request;this.tmpEvents.push(request.on('progress',function(e){_this14.onProgress(e);}),request.on('success',function(data){callback(data);_this14.currentRequest=null;}),request.on('error',function(e){_this14.fireEvent('error',e);_this14.currentRequest=null;}));return request;}},{key:"onProgress",value:function onProgress(e){var percentComplete;if(e.lengthComputable){percentComplete=e.loaded/e.total;}else{percentComplete=e.loaded/(e.loaded+1000000);}
this.fireEvent('loading',Math.round(percentComplete*100),e.target);}},{key:"exportPCM",value:function exportPCM(length,accuracy,noWindow,start,end){length=length||1024;start=start||0;accuracy=accuracy||10000;noWindow=noWindow||false;var peaks=this.backend.getPeaks(length,start,end);var arr=[].map.call(peaks,function(val){return Math.round(val*accuracy)/accuracy;});return new Promise(function(resolve,reject){var json=JSON.stringify(arr);if(!noWindow){window.open('data:application/json;charset=utf-8,'+encodeURIComponent(json));}
resolve(json);});}},{key:"exportImage",value:function exportImage(format,quality,type){if(!format){format='image/png';}
if(!quality){quality=1;}
if(!type){type='dataURL';}
return this.drawer.getImage(format,quality,type);}},{key:"cancelAjax",value:function cancelAjax(){if(this.currentRequest&&this.currentRequest.controller){if(this.currentRequest._reader){this.currentRequest._reader.cancel().catch(function(err){});}
this.currentRequest.controller.abort();this.currentRequest=null;}}},{key:"clearTmpEvents",value:function clearTmpEvents(){this.tmpEvents.forEach(function(e){return e.un();});}},{key:"empty",value:function empty(){if(!this.backend.isPaused()){this.stop();this.backend.disconnectSource();}
this.isReady=false;this.cancelAjax();this.clearTmpEvents();this.drawer.progress(0);this.drawer.setWidth(0);this.drawer.drawPeaks({length:this.drawer.getWidth()},0);}},{key:"destroy",value:function destroy(){this.destroyAllPlugins();this.fireEvent('destroy');this.cancelAjax();this.clearTmpEvents();this.unAll();if(this.params.responsive!==false){window.removeEventListener('resize',this._onResize,true);window.removeEventListener('orientationchange',this._onResize,true);}
if(this.backend){this.backend.destroy();this.backend=null;}
if(this.drawer){this.drawer.destroy();}
this.isDestroyed=true;this.isReady=false;this.arraybuffer=null;}}],[{key:"create",value:function create(params){var wavesurfer=new WaveSurfer(params);return wavesurfer.init();}}]);return WaveSurfer;}(util.Observer);exports.default=WaveSurfer;WaveSurfer.VERSION="4.6.0";WaveSurfer.util=util;module.exports=exports.default;}),"./src/webaudio.js":
/*!*************************!*\
  !*** ./src/webaudio.js ***!
  \*************************/
((module,exports,__webpack_require__)=>{"use strict";function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}
Object.defineProperty(exports,"__esModule",({value:true}));exports.default=void 0;var util=_interopRequireWildcard(__webpack_require__(
/*! ./util */
"./src/util/index.js"));function _getRequireWildcardCache(){if(typeof WeakMap!=="function")return null;var cache=new WeakMap();_getRequireWildcardCache=function _getRequireWildcardCache(){return cache;};return cache;}
function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}
function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}
function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}
function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}
function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}
function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}
function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}
var PLAYING='playing';var PAUSED='paused';var FINISHED='finished';var WebAudio=function(_util$Observer){_inherits(WebAudio,_util$Observer);var _super=_createSuper(WebAudio);function WebAudio(params){var _this$stateBehaviors,_this$states;var _this;_classCallCheck(this,WebAudio);_this=_super.call(this);_this.audioContext=null;_this.offlineAudioContext=null;_this.stateBehaviors=(_this$stateBehaviors={},_defineProperty(_this$stateBehaviors,PLAYING,{init:function init(){this.addOnAudioProcess();},getPlayedPercents:function getPlayedPercents(){var duration=this.getDuration();return this.getCurrentTime()/duration||0;},getCurrentTime:function getCurrentTime(){return this.startPosition+this.getPlayedTime();}}),_defineProperty(_this$stateBehaviors,PAUSED,{init:function init(){this.removeOnAudioProcess();},getPlayedPercents:function getPlayedPercents(){var duration=this.getDuration();return this.getCurrentTime()/duration||0;},getCurrentTime:function getCurrentTime(){return this.startPosition;}}),_defineProperty(_this$stateBehaviors,FINISHED,{init:function init(){this.removeOnAudioProcess();this.fireEvent('finish');},getPlayedPercents:function getPlayedPercents(){return 1;},getCurrentTime:function getCurrentTime(){return this.getDuration();}}),_this$stateBehaviors);_this.params=params;_this.ac=params.audioContext||(_this.supportsWebAudio()?_this.getAudioContext():{});_this.lastPlay=_this.ac.currentTime;_this.startPosition=0;_this.scheduledPause=null;_this.states=(_this$states={},_defineProperty(_this$states,PLAYING,Object.create(_this.stateBehaviors[PLAYING])),_defineProperty(_this$states,PAUSED,Object.create(_this.stateBehaviors[PAUSED])),_defineProperty(_this$states,FINISHED,Object.create(_this.stateBehaviors[FINISHED])),_this$states);_this.buffer=null;_this.filters=[];_this.gainNode=null;_this.mergedPeaks=null;_this.offlineAc=null;_this.peaks=null;_this.playbackRate=1;_this.analyser=null;_this.scriptNode=null;_this.source=null;_this.splitPeaks=[];_this.state=null;_this.explicitDuration=params.duration;_this.destroyed=false;return _this;}
_createClass(WebAudio,[{key:"supportsWebAudio",value:function supportsWebAudio(){return!!(window.AudioContext||window.webkitAudioContext);}},{key:"getAudioContext",value:function getAudioContext(){if(!window.WaveSurferAudioContext){window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)();}
return window.WaveSurferAudioContext;}},{key:"getOfflineAudioContext",value:function getOfflineAudioContext(sampleRate){if(!window.WaveSurferOfflineAudioContext){window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,sampleRate);}
return window.WaveSurferOfflineAudioContext;}},{key:"init",value:function init(){this.createVolumeNode();this.createScriptNode();this.createAnalyserNode();this.setState(PAUSED);this.setPlaybackRate(this.params.audioRate);this.setLength(0);}},{key:"disconnectFilters",value:function disconnectFilters(){if(this.filters){this.filters.forEach(function(filter){filter&&filter.disconnect();});this.filters=null;this.analyser.connect(this.gainNode);}}},{key:"setState",value:function setState(state){if(this.state!==this.states[state]){this.state=this.states[state];this.state.init.call(this);}}},{key:"setFilter",value:function setFilter(){for(var _len=arguments.length,filters=new Array(_len),_key=0;_key<_len;_key++){filters[_key]=arguments[_key];}
this.setFilters(filters);}},{key:"setFilters",value:function setFilters(filters){this.disconnectFilters();if(filters&&filters.length){this.filters=filters;this.analyser.disconnect();filters.reduce(function(prev,curr){prev.connect(curr);return curr;},this.analyser).connect(this.gainNode);}}},{key:"createScriptNode",value:function createScriptNode(){if(this.params.audioScriptProcessor){this.scriptNode=this.params.audioScriptProcessor;}else{if(this.ac.createScriptProcessor){this.scriptNode=this.ac.createScriptProcessor(WebAudio.scriptBufferSize);}else{this.scriptNode=this.ac.createJavaScriptNode(WebAudio.scriptBufferSize);}}
this.scriptNode.connect(this.ac.destination);}},{key:"addOnAudioProcess",value:function addOnAudioProcess(){var _this2=this;this.scriptNode.onaudioprocess=function(){var time=_this2.getCurrentTime();if(time>=_this2.getDuration()){_this2.setState(FINISHED);_this2.fireEvent('pause');}else if(time>=_this2.scheduledPause){_this2.pause();}else if(_this2.state===_this2.states[PLAYING]){_this2.fireEvent('audioprocess',time);}};}},{key:"removeOnAudioProcess",value:function removeOnAudioProcess(){this.scriptNode.onaudioprocess=function(){};}},{key:"createAnalyserNode",value:function createAnalyserNode(){this.analyser=this.ac.createAnalyser();this.analyser.connect(this.gainNode);}},{key:"createVolumeNode",value:function createVolumeNode(){if(this.ac.createGain){this.gainNode=this.ac.createGain();}else{this.gainNode=this.ac.createGainNode();}
this.gainNode.connect(this.ac.destination);}},{key:"setSinkId",value:function setSinkId(deviceId){if(deviceId){var audio=new window.Audio();if(!audio.setSinkId){return Promise.reject(new Error('setSinkId is not supported in your browser'));}
audio.autoplay=true;var dest=this.ac.createMediaStreamDestination();this.gainNode.disconnect();this.gainNode.connect(dest);audio.srcObject=dest.stream;return audio.setSinkId(deviceId);}else{return Promise.reject(new Error('Invalid deviceId: '+deviceId));}}},{key:"setVolume",value:function setVolume(value){this.gainNode.gain.setValueAtTime(value,this.ac.currentTime);}},{key:"getVolume",value:function getVolume(){return this.gainNode.gain.value;}},{key:"decodeArrayBuffer",value:function decodeArrayBuffer(arraybuffer,callback,errback){if(!this.offlineAc){this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100);}
if('webkitAudioContext'in window){this.offlineAc.decodeAudioData(arraybuffer,function(data){return callback(data);},errback);}else{this.offlineAc.decodeAudioData(arraybuffer).then(function(data){return callback(data);}).catch(function(err){return errback(err);});}}},{key:"setPeaks",value:function setPeaks(peaks,duration){if(duration!=null){this.explicitDuration=duration;}
this.peaks=peaks;}},{key:"setLength",value:function setLength(length){if(this.mergedPeaks&&length==2*this.mergedPeaks.length-1+2){return;}
this.splitPeaks=[];this.mergedPeaks=[];var channels=this.buffer?this.buffer.numberOfChannels:1;var c;for(c=0;c<channels;c++){this.splitPeaks[c]=[];this.splitPeaks[c][2*(length-1)]=0;this.splitPeaks[c][2*(length-1)+1]=0;}
this.mergedPeaks[2*(length-1)]=0;this.mergedPeaks[2*(length-1)+1]=0;}},{key:"getPeaks",value:function getPeaks(length,first,last){if(this.peaks){return this.peaks;}
if(!this.buffer){return[];}
first=first||0;last=last||length-1;this.setLength(length);if(!this.buffer){return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;}
if(!this.buffer.length){var newBuffer=this.createBuffer(1,4096,this.sampleRate);this.buffer=newBuffer.buffer;}
var sampleSize=this.buffer.length/length;var sampleStep=~~(sampleSize/10)||1;var channels=this.buffer.numberOfChannels;var c;for(c=0;c<channels;c++){var peaks=this.splitPeaks[c];var chan=this.buffer.getChannelData(c);var i=void 0;for(i=first;i<=last;i++){var start=~~(i*sampleSize);var end=~~(start+sampleSize);var min=chan[start];var max=min;var j=void 0;for(j=start;j<end;j+=sampleStep){var value=chan[j];if(value>max){max=value;}
if(value<min){min=value;}}
peaks[2*i]=max;peaks[2*i+1]=min;if(c==0||max>this.mergedPeaks[2*i]){this.mergedPeaks[2*i]=max;}
if(c==0||min<this.mergedPeaks[2*i+1]){this.mergedPeaks[2*i+1]=min;}}}
return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;}},{key:"getPlayedPercents",value:function getPlayedPercents(){return this.state.getPlayedPercents.call(this);}},{key:"disconnectSource",value:function disconnectSource(){if(this.source){this.source.disconnect();}}},{key:"destroyWebAudio",value:function destroyWebAudio(){this.disconnectFilters();this.disconnectSource();this.gainNode.disconnect();this.scriptNode.disconnect();this.analyser.disconnect();if(this.params.closeAudioContext){if(typeof this.ac.close==='function'&&this.ac.state!='closed'){this.ac.close();}
this.ac=null;if(!this.params.audioContext){window.WaveSurferAudioContext=null;}else{this.params.audioContext=null;}
window.WaveSurferOfflineAudioContext=null;}}},{key:"destroy",value:function destroy(){if(!this.isPaused()){this.pause();}
this.unAll();this.buffer=null;this.destroyed=true;this.destroyWebAudio();}},{key:"load",value:function load(buffer){this.startPosition=0;this.lastPlay=this.ac.currentTime;this.buffer=buffer;this.createSource();}},{key:"createSource",value:function createSource(){this.disconnectSource();this.source=this.ac.createBufferSource();this.source.start=this.source.start||this.source.noteGrainOn;this.source.stop=this.source.stop||this.source.noteOff;this.setPlaybackRate(this.playbackRate);this.source.buffer=this.buffer;this.source.connect(this.analyser);}},{key:"resumeAudioContext",value:function resumeAudioContext(){if(this.ac.state=='suspended'){this.ac.resume&&this.ac.resume();}}},{key:"isPaused",value:function isPaused(){return this.state!==this.states[PLAYING];}},{key:"getDuration",value:function getDuration(){if(this.explicitDuration){return this.explicitDuration;}
if(!this.buffer){return 0;}
return this.buffer.duration;}},{key:"seekTo",value:function seekTo(start,end){if(!this.buffer){return;}
this.scheduledPause=null;if(start==null){start=this.getCurrentTime();if(start>=this.getDuration()){start=0;}}
if(end==null){end=this.getDuration();}
this.startPosition=start;this.lastPlay=this.ac.currentTime;if(this.state===this.states[FINISHED]){this.setState(PAUSED);}
return{start:start,end:end};}},{key:"getPlayedTime",value:function getPlayedTime(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate;}},{key:"play",value:function play(start,end){if(!this.buffer){return;}
this.createSource();var adjustedTime=this.seekTo(start,end);start=adjustedTime.start;end=adjustedTime.end;this.scheduledPause=end;this.source.start(0,start);this.resumeAudioContext();this.setState(PLAYING);this.fireEvent('play');}},{key:"pause",value:function pause(){this.scheduledPause=null;this.startPosition+=this.getPlayedTime();this.source&&this.source.stop(0);this.setState(PAUSED);this.fireEvent('pause');}},{key:"getCurrentTime",value:function getCurrentTime(){return this.state.getCurrentTime.call(this);}},{key:"getPlaybackRate",value:function getPlaybackRate(){return this.playbackRate;}},{key:"setPlaybackRate",value:function setPlaybackRate(value){this.playbackRate=value||1;this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime);}},{key:"setPlayEnd",value:function setPlayEnd(end){this.scheduledPause=end;}}]);return WebAudio;}(util.Observer);exports.default=WebAudio;WebAudio.scriptBufferSize=256;module.exports=exports.default;}),"./node_modules/debounce/index.js":
/*!****************************************!*\
  !*** ./node_modules/debounce/index.js ***!
  \****************************************/
((module)=>{function debounce(func,wait,immediate){var timeout,args,context,timestamp,result;if(null==wait)wait=100;function later(){var last=Date.now()-timestamp;if(last<wait&&last>=0){timeout=setTimeout(later,wait-last);}else{timeout=null;if(!immediate){result=func.apply(context,args);context=args=null;}}};var debounced=function(){context=this;args=arguments;timestamp=Date.now();var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow){result=func.apply(context,args);context=args=null;}
return result;};debounced.clear=function(){if(timeout){clearTimeout(timeout);timeout=null;}};debounced.flush=function(){if(timeout){result=func.apply(context,args);context=args=null;clearTimeout(timeout);timeout=null;}};return debounced;};debounce.debounce=debounce;module.exports=debounce;})});var __webpack_module_cache__={};function __webpack_require__(moduleId){if(__webpack_module_cache__[moduleId]){return __webpack_module_cache__[moduleId].exports;}
var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId](module,module.exports,__webpack_require__);return module.exports;}
var __webpack_exports__=__webpack_require__("./src/wavesurfer.js");return __webpack_exports__;})();});
var astraGetParents=function(e,t){Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),a=t.length;0<=--a&&t.item(a)!==this;);return-1<a});for(var a=[];e&&e!==document;e=e.parentNode)t&&!e.matches(t)||a.push(e);return a},getParents=function(e,t){console.warn("getParents() function has been deprecated since version 2.5.0 or above of Astra Theme and will be removed in the future. Use astraGetParents() instead."),astraGetParents(e,t)},astraToggleClass=function(e,t){e.classList.contains(t)?e.classList.remove(t):e.classList.add(t)},toggleClass=function(e,t){console.warn("toggleClass() function has been deprecated since version 2.5.0 or above of Astra Theme and will be removed in the future. Use astraToggleClass() instead."),astraToggleClass(e,t)};!function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}();var astraTriggerEvent=function(e,t){var a=new CustomEvent(t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{});e.dispatchEvent(a)};!function(){function e(){var e=document.querySelector("body").style.overflow;document.querySelector("body").style.overflow="hidden";var t=window.innerWidth;document.querySelector("body").style.overflow=e;var a=astra.break_point,s=document.querySelectorAll(".main-header-bar-wrap");if(0<s.length)for(var n=0;n<s.length;n++)"DIV"==s[n].tagName&&s[n].classList.contains("main-header-bar-wrap")&&(a<t?(null!=r[n]&&r[n].classList.remove("toggled"),document.body.classList.remove("ast-header-break-point"),document.body.classList.add("ast-desktop"),astraTriggerEvent(document.body,"astra-header-responsive-enabled")):(document.body.classList.add("ast-header-break-point"),document.body.classList.remove("ast-desktop"),astraTriggerEvent(document.body,"astra-header-responsive-disabled")))}var t,a,s,r=document.querySelectorAll(".main-header-menu-toggle"),n={};e(),AstraToggleSubMenu=function(){var e,t=this.parentNode;t.classList.contains("ast-submenu-expanded")&&document.querySelector("header.site-header").classList.contains("ast-menu-toggle-link")&&(this.classList.contains("ast-menu-toggle")||""===(e=t.querySelector("a").getAttribute("href"))&&"#"===e||(window.location=e));for(var a=t.querySelectorAll(".menu-item-has-children"),s=0;s<a.length;s++){a[s].classList.remove("ast-submenu-expanded");var n=a[s].querySelector(".sub-menu, .children");null!==n&&(n.style.display="none")}for(var o=t.parentNode.querySelectorAll(".menu-item-has-children"),s=0;s<o.length;s++)if(o[s]!=t){o[s].classList.remove("ast-submenu-expanded");for(var r=o[s].querySelectorAll(".sub-menu"),l=0;l<r.length;l++)r[l].style.display="none"}t.classList.contains("menu-item-has-children")&&(astraToggleClass(t,"ast-submenu-expanded"),t.classList.contains("ast-submenu-expanded")?t.querySelector(".sub-menu").style.display="block":t.querySelector(".sub-menu").style.display="none")},AstraNavigationMenu=function(e){console.warn("AstraNavigationMenu() function has been deprecated since version 1.6.5 or above of Astra Theme and will be removed in the future.")},AstraToggleMenu=function(e){if(console.warn("AstraToggleMenu() function has been deprecated since version 1.6.5 or above of Astra Theme and will be removed in the future. Use AstraToggleSubMenu() instead."),0<e.length)for(var t=0;t<e.length;t++)e[t].addEventListener("click",AstraToggleSubMenu,!1)},AstraToggleSetup=function(){var e=document.querySelectorAll(".main-header-bar-navigation");if(0<r.length)for(var t,a=0;a<r.length;a++)if(r[a].setAttribute("data-index",a),n[a]||(n[a]=r[a],r[a].addEventListener("click",astraNavMenuToggle,!1)),void 0!==e[a]&&0<(t=document.querySelector("header.site-header").classList.contains("ast-menu-toggle-link")?e[a].querySelectorAll(".ast-header-break-point .main-header-menu .menu-item-has-children > .menu-link, .ast-header-break-point ul.main-header-menu .ast-menu-toggle"):e[a].querySelectorAll("ul.main-header-menu .ast-menu-toggle")).length)for(var s=0;s<t.length;s++)t[s].addEventListener("click",AstraToggleSubMenu,!1)},astraNavMenuToggle=function(e){e.preventDefault();var t=document.querySelectorAll(".main-header-bar-navigation");if(void 0===t[e=this.getAttribute("data-index")])return!1;for(var a=t[e].querySelectorAll(".menu-item-has-children"),s=0;s<a.length;s++){a[s].classList.remove("ast-submenu-expanded");for(var n=a[s].querySelectorAll(".sub-menu"),o=0;o<n.length;o++)n[o].style.display="none"}-1!==(this.getAttribute("class")||"").indexOf("main-header-menu-toggle")&&(astraToggleClass(t[e],"toggle-on"),astraToggleClass(r[e],"toggled"),t[e].classList.contains("toggle-on")?(t[e].style.display="block",document.body.classList.add("ast-main-header-nav-open")):(t[e].style.display="",document.body.classList.remove("ast-main-header-nav-open")))},document.body.addEventListener("astra-header-responsive-enabled",function(){var e=document.querySelectorAll(".main-header-bar-navigation");if(0<e.length)for(var t=0;t<e.length;t++){null!=e[t]&&(e[t].classList.remove("toggle-on"),e[t].style.display="");for(var a=e[t].getElementsByClassName("sub-menu"),s=0;s<a.length;s++)a[s].style.display="";for(var n=e[t].getElementsByClassName("children"),o=0;o<n.length;o++)n[o].style.display="";for(var r=e[t].getElementsByClassName("ast-search-menu-icon"),l=0;l<r.length;l++)r[l].classList.remove("ast-dropdown-active"),r[l].style.display=""}},!1),window.addEventListener("resize",function(){"INPUT"!==document.activeElement.tagName&&(e(),AstraToggleSetup())}),document.addEventListener("DOMContentLoaded",function(){var e,t;for(AstraToggleSetup(),e=document.querySelectorAll(".navigation-accessibility"),t=0;t<=e.length-1;t++)e[t]&&function(e){if(e){var t=e.getElementsByTagName("button")[0];if(void 0!==t||void 0!==(t=e.getElementsByTagName("a")[0])){var a=e.getElementsByTagName("ul")[0];if(void 0!==a){a.setAttribute("aria-expanded","false"),-1===a.className.indexOf("nav-menu")&&(a.className+=" nav-menu"),t.onclick=function(){-1!==e.className.indexOf("toggled")?(e.className=e.className.replace(" toggled",""),t.setAttribute("aria-expanded","false"),a.setAttribute("aria-expanded","false")):(e.className+=" toggled",t.setAttribute("aria-expanded","true"),a.setAttribute("aria-expanded","true"))};for(var s=a.getElementsByTagName("a"),n=a.getElementsByTagName("ul"),o=0,r=n.length;o<r;o++)n[o].parentNode.setAttribute("aria-haspopup","true");for(o=0,r=s.length;o<r;o++)s[o].addEventListener("focus",d,!0),s[o].addEventListener("blur",u,!0),s[o].addEventListener("click",c,!0)}else t.style.display="none"}}}(e[t])}),s=(a=navigator.userAgent).match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(s[1])?t=/\brv[ :]+(\d+)/g.exec(a)||[]:"Chrome"===s[1]&&null!=(t=a.match(/\bOPR|Edge\/(\d+)/))||(s=s[2]?[s[1],s[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=a.match(/version\/(\d+)/i))&&s.splice(1,1,t[1]),t=document.body,"Safari"===s[0]&&s[1]<11&&t.classList.add("ast-safari-browser-less-than-11"));for(var o,l=document.getElementsByClassName("astra-search-icon"),i=0;i<l.length;i++)l[i].onclick=function(e){var t;this.classList.contains("slide-search")&&(e.preventDefault(),(t=this.parentNode.parentNode.parentNode.querySelector(".ast-search-menu-icon")).classList.contains("ast-dropdown-active")?(""!==(t.querySelector(".search-field").value||"")&&t.querySelector(".search-form").submit(),t.classList.remove("ast-dropdown-active")):(t.classList.add("ast-dropdown-active"),t.querySelector(".search-field").setAttribute("autocomplete","off"),setTimeout(function(){t.querySelector(".search-field").focus()},200)))};function c(){var e=this||"";if(e&&!e.classList.contains("astra-search-icon")&&-1!==new String(e).indexOf("#")){var t=e.parentNode;if(!document.body.classList.contains("ast-header-break-point")||document.querySelector("header.site-header").classList.contains("ast-menu-toggle-link")&&t.classList.contains("menu-item-has-children"))for(;-1===e.className.indexOf("nav-menu");)"li"===e.tagName.toLowerCase()&&-1!==e.className.indexOf("focus")&&(e.className=e.className.replace(" focus","")),e=e.parentElement;else{document.querySelector(".main-header-menu-toggle").classList.remove("toggled"),(s=document.querySelector(".main-header-bar-navigation")).classList.remove("toggle-on"),s.style.display="none";var a=document.querySelector(".menu-below-header-toggle"),t=document.querySelector(".ast-below-header"),s=document.querySelector(".ast-below-header-actual-nav");a&&t&&s&&(a.classList.remove("toggled"),t.classList.remove("toggle-on"),s.style.display="none"),a=document.querySelector(".menu-above-header-toggle"),t=document.querySelector(".ast-above-header"),s=document.querySelector(".ast-above-header-navigation"),a&&t&&s&&(a.classList.remove("toggled"),t.classList.remove("toggle-on"),s.style.display="none"),astraTriggerEvent(document.querySelector("body"),"astraMenuHashLinkClicked")}}}function d(){for(var e=this;-1===e.className.indexOf("nav-menu");)"li"===e.tagName.toLowerCase()&&(-1!==e.className.indexOf("focus")?e.className=e.className.replace(" focus",""):e.className+=" focus"),e=e.parentElement}function u(){var e=this||"";if(-1===new String(e).indexOf("#")||!document.body.classList.contains("ast-mouse-clicked"))for(;-1===e.className.indexOf("nav-menu");)"li"===e.tagName.toLowerCase()&&(-1!==e.className.indexOf("focus")?e.className=e.className.replace(" focus",""):e.className+=" focus"),e=e.parentElement}document.body.onclick=function(e){if(void 0!==e.target.classList&&!e.target.classList.contains("ast-search-menu-icon")&&0===astraGetParents(e.target,".ast-search-menu-icon").length&&0===astraGetParents(e.target,".ast-search-icon").length)for(var t=document.getElementsByClassName("ast-search-menu-icon"),a=0;a<t.length;a++)t[a].classList.remove("ast-dropdown-active")},"querySelector"in document&&"addEventListener"in window&&((o=document.body).addEventListener("mousedown",function(){o.classList.add("ast-mouse-clicked")}),o.addEventListener("keydown",function(){o.classList.remove("ast-mouse-clicked")}))}();
function q2w3_sidebar_init(){for(var e=0;e<q2w3_sidebar_options.length;e++)q2w3_sidebar(q2w3_sidebar_options[e]);jQuery(window).on("resize",function(){for(var e=0;e<q2w3_sidebar_options.length;e++)q2w3_sidebar(q2w3_sidebar_options[e])});var i=function(){for(var e=["WebKit","Moz","O","Ms",""],i=0;i<e.length;i++)if(e[i]+"MutationObserver"in window)return window[e[i]+"MutationObserver"];return!1}();0==q2w3_sidebar_options[0].disable_mo_api&&i?(q2w3Refresh=!1,new i(function(e){e.forEach(function(e){-1!=q2w3_exclude_mutations_array(q2w3_sidebar_options).indexOf(e.target.id)||e.target.className&&"function"==typeof e.target.className.indexOf&&-1!=e.target.className.indexOf("q2w3-fixed-widget-container")||(q2w3Refresh=!0)})}).observe(document.body,{childList:!0,attributes:!0,attributeFilter:["style","class"],subtree:!0}),setInterval(function(){if(q2w3Refresh){for(var e=0;e<q2w3_sidebar_options.length;e++)q2w3_sidebar(q2w3_sidebar_options[e]);q2w3Refresh=!1}},300)):(console.log("MutationObserver not supported or disabled!"),q2w3_sidebar_options[0].refresh_interval>0&&setInterval(function(){for(var e=0;e<q2w3_sidebar_options.length;e++)q2w3_sidebar(q2w3_sidebar_options[e])},q2w3_sidebar_options[0].refresh_interval))}function q2w3_exclude_mutations_array(e){for(var i=new Array,o=0;o<e.length;o++)if(e[o].widgets.length>0)for(var t=0;t<e[o].widgets.length;t++)i.push(e[o].widgets[t]),i.push(e[o].widgets[t]+"_clone");return i}function q2w3_sidebar(e){if(!e)return!1;if(!e.widgets)return!1;if(e.widgets.length<1)return!1;function i(){}e.sidebar||(e.sidebar="q2w3-default-sidebar");var o=new Array,t=jQuery(window).height(),n=jQuery(document).height(),r=e.margin_top;jQuery("#wpadminbar").length&&(r=e.margin_top+jQuery("#wpadminbar").height()),jQuery(".q2w3-widget-clone-"+e.sidebar).remove();for(var s=0;s<e.widgets.length;s++)widget_obj=jQuery("#"+e.widgets[s]),widget_obj.css("position",""),widget_obj.attr("id")?(o[s]=new i,o[s].obj=widget_obj,o[s].clone=widget_obj.clone(),o[s].clone.children().remove(),o[s].clone_id=widget_obj.attr("id")+"_clone",o[s].clone.addClass("q2w3-widget-clone-"+e.sidebar),o[s].clone.attr("id",o[s].clone_id),o[s].clone.css("height",widget_obj.height()),o[s].clone.css("visibility","hidden"),o[s].offset_top=widget_obj.offset().top,o[s].fixed_margin_top=r,o[s].height=widget_obj.outerHeight(!0),o[s].fixed_margin_bottom=r+o[s].height,r+=o[s].height):o[s]=!1;var d,a=0;for(s=o.length-1;s>=0;s--)o[s]&&(o[s].next_widgets_height=a,o[s].fixed_margin_bottom+=a,a+=o[s].height,d||((d=widget_obj.parent()).addClass("q2w3-fixed-widget-container"),d.css("height",""),d.height(d.height())));jQuery(window).off("scroll."+e.sidebar);for(s=0;s<o.length;s++)o[s]&&_(o[s]);function _(i){var o,r=i.offset_top-i.fixed_margin_top,s=n-e.margin_bottom;e.stop_id&&jQuery("#"+e.stop_id).length&&(s=jQuery("#"+e.stop_id).offset().top-e.margin_bottom),o=e.width_inherit?"inherit":i.obj.css("width");var d=!1,a=!1,_=!1;jQuery(window).on("scroll."+e.sidebar,function(n){if(jQuery(window).width()<=e.screen_max_width||jQuery(window).height()<=e.screen_max_height)_||(i.obj.css("position",""),i.obj.css("top",""),i.obj.css("bottom",""),i.obj.css("width",""),i.obj.css("margin",""),i.obj.css("padding",""),widget_obj.parent().css("height",""),jQuery("#"+i.clone_id).length>0&&jQuery("#"+i.clone_id).remove(),_=!0,d=!1,a=!1);else{var w=jQuery(this).scrollTop();w+i.fixed_margin_bottom>=s?(a||(i.obj.css("position","fixed"),i.obj.css("top",""),i.obj.css("width",o),jQuery("#"+i.clone_id).length<=0&&i.obj.before(i.clone),a=!0,d=!1,_=!1),i.obj.css("bottom",w+t+i.next_widgets_height-s)):w>=r?d||(i.obj.css("position","fixed"),i.obj.css("top",i.fixed_margin_top),i.obj.css("bottom",""),i.obj.css("width",o),jQuery("#"+i.clone_id).length<=0&&i.obj.before(i.clone),d=!0,a=!1,_=!1):_||(i.obj.css("position",""),i.obj.css("top",""),i.obj.css("bottom",""),i.obj.css("width",""),jQuery("#"+i.clone_id).length>0&&jQuery("#"+i.clone_id).remove(),_=!0,d=!1,a=!1)}}).trigger("scroll."+e.sidebar)}}"undefined"!=typeof q2w3_sidebar_options&&q2w3_sidebar_options.length>0?window.jQuery?q2w3_sidebar_options[0].window_load_hook?jQuery(window).load(q2w3_sidebar_init):"loading"!=document.readyState?q2w3_sidebar_init():document.addEventListener("DOMContentLoaded",q2w3_sidebar_init):console.log("jQuery is not loaded!"):console.log("q2w3_sidebar_options not found!");
/*! This file is auto-generated */
!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):jQuery&&!jQuery.fn.hoverIntent&&e(jQuery)}(function(i){"use strict";function d(e){u=e.pageX,r=e.pageY}var u,r,v={interval:100,sensitivity:6,timeout:0},a=0,p=function(e,t,n,o){if(Math.sqrt((n.pX-u)*(n.pX-u)+(n.pY-r)*(n.pY-r))<o.sensitivity)return t.off(n.event,d),delete n.timeoutId,n.isActive=!0,e.pageX=u,e.pageY=r,delete n.pX,delete n.pY,o.over.apply(t[0],[e]);n.pX=u,n.pY=r,n.timeoutId=setTimeout(function(){p(e,t,n,o)},o.interval)};i.fn.hoverIntent=function(e,t,n){var o=a++,s=i.extend({},v);i.isPlainObject(e)?(s=i.extend(s,e),i.isFunction(s.out)||(s.out=s.over)):s=i.isFunction(t)?i.extend(s,{over:e,out:t,selector:n}):i.extend(s,{over:e,out:e,selector:t});t=function(e){var u=i.extend({},e),r=i(this),t=r.data("hoverIntent");t||r.data("hoverIntent",t={});var v=t[o];v||(t[o]=v={id:o}),v.timeoutId&&(v.timeoutId=clearTimeout(v.timeoutId));t=v.event="mousemove.hoverIntent.hoverIntent"+o;"mouseenter"===e.type?v.isActive||(v.pX=u.pageX,v.pY=u.pageY,r.off(t,d).on(t,d),v.timeoutId=setTimeout(function(){p(u,r,v,s)},s.interval)):v.isActive&&(r.off(t,d),v.timeoutId=setTimeout(function(){var e,t,n,o,i;e=u,t=r,n=v,o=s.out,(i=t.data("hoverIntent"))&&delete i[n.id],o.apply(t[0],[e])},s.timeout))};return this.on({"mouseenter.hoverIntent":t,"mouseleave.hoverIntent":t},s.selector)}});
/*! Max Mega Menu jQuery Plugin */
(function($){"use strict";$.maxmegamenu=function(menu,options){var plugin=this;var $menu=$(menu);var $toggle_bar=$menu.siblings(".mega-menu-toggle");var html_body_class_timeout;var defaults={event:$menu.attr("data-event"),effect:$menu.attr("data-effect"),effect_speed:parseInt($menu.attr("data-effect-speed")),effect_mobile:$menu.attr("data-effect-mobile"),effect_speed_mobile:parseInt($menu.attr("data-effect-speed-mobile")),panel_width:$menu.attr("data-panel-width"),panel_inner_width:$menu.attr("data-panel-inner-width"),mobile_force_width:$menu.attr("data-mobile-force-width"),mobile_overlay:$menu.attr("data-mobile-overlay"),mobile_state:$menu.attr("data-mobile-state"),second_click:$menu.attr("data-second-click"),vertical_behaviour:$menu.attr("data-vertical-behaviour"),document_click:$menu.attr("data-document-click"),breakpoint:$menu.attr("data-breakpoint"),unbind_events:$menu.attr("data-unbind"),hover_intent_timeout:$menu.attr("data-hover-intent-timeout"),hover_intent_interval:$menu.attr("data-hover-intent-interval")};plugin.settings={};var items_with_submenus=$("li.mega-menu-megamenu.mega-menu-item-has-children,"+"li.mega-menu-flyout.mega-menu-item-has-children,"+"li.mega-menu-tabbed > ul.mega-sub-menu > li.mega-menu-item-has-children,"+"li.mega-menu-flyout li.mega-menu-item-has-children",menu);var collapse_children_parents=$("li.mega-menu-megamenu li.mega-menu-item-has-children.mega-collapse-children > a.mega-menu-link",menu);plugin.addAnimatingClass=function(element){if(plugin.settings.effect==="disabled"){return;}
$(".mega-animating").removeClass("mega-animating");var timeout=plugin.settings.effect_speed+parseInt(megamenu.timeout,10);element.addClass("mega-animating");setTimeout(function(){element.removeClass("mega-animating");},timeout);};plugin.hideAllPanels=function(){$(".mega-toggle-on > a.mega-menu-link",$menu).each(function(){plugin.hidePanel($(this),false);});};plugin.expandMobileSubMenus=function(){$(".mega-menu-item-has-children.mega-expand-on-mobile > a.mega-menu-link",$menu).each(function(){plugin.showPanel($(this));});if(plugin.settings.mobile_state=='expand_all'){$(".mega-menu-item-has-children > a.mega-menu-link",$menu).each(function(){plugin.showPanel($(this));});}
if(plugin.settings.mobile_state=='expand_active'){$("li.mega-current-menu-ancestor.mega-menu-item-has-children > a.mega-menu-link,"+"li.mega-current-menu-item.mega-menu-item-has-children > a.mega-menu-link"+"li.mega-current-menu-parent.mega-menu-item-has-children > a.mega-menu-link"+"li.mega-current_page_ancestor.mega-menu-item-has-children > a.mega-menu-link"+"li.mega-current_page_item.mega-menu-item-has-children > a.mega-menu-link",$menu).each(function(){plugin.showPanel($(this));});}}
plugin.hideSiblingPanels=function(anchor,immediate){anchor.parent().parent().find(".mega-toggle-on").children("a.mega-menu-link").each(function(){plugin.hidePanel($(this),immediate);});};plugin.isDesktopView=function(){return Math.max(window.outerWidth,$(window).width())>plugin.settings.breakpoint;};plugin.isMobileView=function(){return!plugin.isDesktopView();};plugin.showPanel=function(anchor){anchor.parent().triggerHandler("before_open_panel");anchor.attr("aria-expanded","true");$(".mega-animating").removeClass("mega-animating");if(plugin.isMobileView()&&anchor.parent().hasClass("mega-hide-sub-menu-on-mobile")){return;}
if(plugin.isDesktopView()&&($menu.hasClass("mega-menu-horizontal")||$menu.hasClass("mega-menu-vertical"))&&!anchor.parent().hasClass("mega-collapse-children")){plugin.hideSiblingPanels(anchor,true);}
if((plugin.isMobileView()&&$menu.hasClass("mega-keyboard-navigation"))||plugin.settings.vertical_behaviour==="accordion"){plugin.hideSiblingPanels(anchor,false);}
plugin.calculateDynamicSubmenuWidths(anchor);if(anchor.parent().hasClass("mega-collapse-children")||plugin.settings.effect==="slide"||(plugin.isMobileView()&&(plugin.settings.effect_mobile==="slide"||plugin.settings.effect_mobile==="slide_left"||plugin.settings.effect_mobile==="slide_right"))){var speed=plugin.isMobileView()?plugin.settings.effect_speed_mobile:plugin.settings.effect_speed;anchor.siblings(".mega-sub-menu").css("display","none").animate({"height":"show","paddingTop":"show","paddingBottom":"show","minHeight":"show"},speed,function(){$(this).css("display","");});}
anchor.parent().addClass("mega-toggle-on").triggerHandler("open_panel");};plugin.hidePanel=function(anchor,immediate){anchor.parent().triggerHandler("before_close_panel");anchor.attr("aria-expanded","false");if(anchor.parent().hasClass("mega-collapse-children")||(!immediate&&plugin.settings.effect==="slide")||(plugin.isMobileView()&&(plugin.settings.effect_mobile==="slide"||plugin.settings.effect_mobile==="slide_left"||plugin.settings.effect_mobile==="slide_right"))){var speed=plugin.isMobileView()?plugin.settings.effect_speed_mobile:plugin.settings.effect_speed;anchor.siblings(".mega-sub-menu").animate({"height":"hide","paddingTop":"hide","paddingBottom":"hide","minHeight":"hide"},speed,function(){anchor.siblings(".mega-sub-menu").css("display","");anchor.parent().removeClass("mega-toggle-on").triggerHandler("close_panel");});return;}
if(immediate){anchor.siblings(".mega-sub-menu").css("display","none").delay(plugin.settings.effect_speed).queue(function(){$(this).css("display","").dequeue();});}
anchor.siblings(".mega-sub-menu").find(".widget_media_video video").each(function(){this.player.pause();});anchor.parent().removeClass("mega-toggle-on").triggerHandler("close_panel");plugin.addAnimatingClass(anchor.parent());};plugin.calculateDynamicSubmenuWidths=function(anchor){if(anchor.parent().hasClass("mega-menu-megamenu")&&anchor.parent().parent().hasClass("max-mega-menu")&&plugin.settings.panel_width&&$(plugin.settings.panel_width).length>0){if(plugin.isDesktopView()){var submenu_offset=$menu.offset();var target_offset=$(plugin.settings.panel_width).offset();anchor.siblings(".mega-sub-menu").css({width:$(plugin.settings.panel_width).outerWidth(),left:(target_offset.left-submenu_offset.left)+"px"});}else{anchor.siblings(".mega-sub-menu").css({width:"",left:""});}}
if(anchor.parent().hasClass("mega-menu-megamenu")&&anchor.parent().parent().hasClass("max-mega-menu")&&plugin.settings.panel_inner_width&&$(plugin.settings.panel_inner_width).length>0){var target_width=0;if($(plugin.settings.panel_inner_width).length){target_width=parseInt($(plugin.settings.panel_inner_width).width(),10);}else{target_width=parseInt(plugin.settings.panel_inner_width,10);}
var submenu_width=parseInt(anchor.siblings(".mega-sub-menu").innerWidth(),10);if(plugin.isDesktopView()&&target_width>0&&target_width<submenu_width){anchor.siblings(".mega-sub-menu").css({"paddingLeft":(submenu_width-target_width)/2+"px","paddingRight":(submenu_width-target_width)/2+"px"});}else{anchor.siblings(".mega-sub-menu").css({"paddingLeft":"","paddingRight":""});}}};plugin.bindClickEvents=function(){var dragging=false;$(document).on({"touchmove":function(e){dragging=true;},"touchstart":function(e){dragging=false;}});$(document).on("click touchend",function(e){if(!dragging&&plugin.settings.document_click==="collapse"&&!$(e.target).closest(".max-mega-menu li").length&&!$(e.target).closest(".mega-menu-toggle").length){plugin.hideAllPanels();plugin.hideMobileMenu();}
dragging=false;});var clickable_parents=$("> a.mega-menu-link",items_with_submenus).add(collapse_children_parents);clickable_parents.on("touchend.megamenu",function(e){plugin.unbindHoverEvents();plugin.unbindHoverIntentEvents();});clickable_parents.not("[data-has-click-event]").on("click.megamenu",function(e){if(plugin.isDesktopView()&&$(this).parent().hasClass("mega-toggle-on")&&$(this).parent().parent().parent().hasClass("mega-menu-tabbed")){if(plugin.settings.second_click==="go"){return;}else{e.preventDefault();return;}}
if(dragging){return;}
if(plugin.isMobileView()&&$(this).parent().hasClass("mega-hide-sub-menu-on-mobile")){return;}
if((plugin.settings.second_click==="go"||$(this).parent().hasClass("mega-click-click-go"))&&$(this).attr("href")!==undefined){if(!$(this).parent().hasClass("mega-toggle-on")){e.preventDefault();plugin.showPanel($(this));}}else{e.preventDefault();if($(this).parent().hasClass("mega-toggle-on")){plugin.hidePanel($(this),false);}else{plugin.showPanel($(this));}}});collapse_children_parents.each(function(){$(this).attr("data-has-click-event","true");});if(plugin.settings.second_click==="disabled"){clickable_parents.off("click.megamenu");}
$(".mega-close-after-click:not(.mega-menu-item-has-children) > a.mega-menu-link",menu).on("click",function(){plugin.hideAllPanels();plugin.hideMobileMenu();});};plugin.bindHoverEvents=function(){items_with_submenus.on({"mouseenter.megamenu":function(){plugin.unbindClickEvents();if(!$(this).hasClass("mega-toggle-on")){plugin.showPanel($(this).children("a.mega-menu-link"));}},"mouseleave.megamenu":function(){if($(this).hasClass("mega-toggle-on")&&!$(this).hasClass("mega-disable-collapse")&&!$(this).parent().parent().hasClass("mega-menu-tabbed")){plugin.hidePanel($(this).children("a.mega-menu-link"),false);}}});};plugin.bindHoverIntentEvents=function(){items_with_submenus.hoverIntent({over:function(){plugin.unbindClickEvents();if(!$(this).hasClass("mega-toggle-on")){plugin.showPanel($(this).children("a.mega-menu-link"));}},out:function(){if($(this).hasClass("mega-toggle-on")&&!$(this).hasClass("mega-disable-collapse")&&!$(this).parent().parent().hasClass("mega-menu-tabbed")){plugin.hidePanel($(this).children("a.mega-menu-link"),false);}},timeout:plugin.settings.hover_intent_timeout,interval:plugin.settings.hover_intent_interval});};plugin.bindKeyboardEvents=function(){var tab_key=9;var escape_key=27;var enter_key=13;var left_arrow_key=37;var right_arrow_key=39;var space_key=32;$menu.parent().on("keyup.megamenu",function(e){var keyCode=e.keyCode||e.which;if(keyCode===tab_key){$menu.parent().addClass("mega-keyboard-navigation");}});$menu.parent().on("keydown.megamenu",function(e){var keyCode=e.keyCode||e.which;var active_link=$(e.target);if(keyCode===space_key&&active_link.is(".mega-menu-link")&&$menu.parent().hasClass("mega-keyboard-navigation")){e.preventDefault();if(active_link.parent().is(items_with_submenus)){if(active_link.parent().hasClass("mega-toggle-on")&&!active_link.parent().parent().parent().hasClass("mega-menu-tabbed")){plugin.hidePanel(active_link);}else{plugin.showPanel(active_link);}}}});$menu.parent().on("keyup.megamenu",function(e){var keyCode=e.keyCode||e.which;var active_link=$(e.target);if(keyCode===tab_key&&$menu.parent().hasClass("mega-keyboard-navigation")){if(active_link.parent().is(items_with_submenus)&&active_link.is("[href]")!==false){plugin.showPanel(active_link);}else{if(!active_link.parent().parent().parent().hasClass("mega-menu-tabbed")){plugin.hideSiblingPanels(active_link);}}}
if(keyCode===escape_key&&$menu.parent().hasClass("mega-keyboard-navigation")){var submenu_open=$("> .mega-toggle-on",$menu).length!==0;$("> .mega-toggle-on > a.mega-menu-link",$menu).focus();plugin.hideAllPanels();if(plugin.isMobileView()&&!submenu_open){plugin.hideMobileMenu();$(".mega-menu-toggle-block, button.mega-toggle-animated",$toggle_bar).first().focus();}}
if(keyCode===enter_key&&$menu.parent().hasClass("mega-keyboard-navigation")){if(active_link.hasClass("mega-menu-toggle-block")){if($toggle_bar.hasClass("mega-menu-open")){plugin.hideMobileMenu();}else{plugin.showMobileMenu();}}
if(active_link.parent().is(items_with_submenus)&&active_link.is("[href]")===false){if(active_link.parent().hasClass("mega-toggle-on")&&!active_link.parent().parent().parent().hasClass("mega-menu-tabbed")){plugin.hidePanel(active_link);}else{plugin.showPanel(active_link);}}}
if(keyCode===right_arrow_key&&plugin.isDesktopView()&&$menu.parent().hasClass("mega-keyboard-navigation")&&$menu.hasClass("mega-menu-horizontal")){var next_top_level_item=$("> .mega-toggle-on",$menu).nextAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search input[type=text]").first();if(next_top_level_item.length===0){next_top_level_item=$(":focus",$menu).parent().nextAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search input[type=text]").first();}
next_top_level_item.focus();if(next_top_level_item.parent().is(items_with_submenus)&&next_top_level_item.is("[href]")!==false){plugin.showPanel(next_top_level_item);}else{plugin.hideSiblingPanels(next_top_level_item);}}
if(keyCode===left_arrow_key&&plugin.isDesktopView()&&$menu.parent().hasClass("mega-keyboard-navigation")&&$menu.hasClass("mega-menu-horizontal")){var prev_top_level_item=$("> .mega-toggle-on",$menu).prevAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search input[type=text]").last();if(prev_top_level_item.length===0){prev_top_level_item=$(":focus",$menu).parent().prevAll("li.mega-menu-item:visible").find("> a.mega-menu-link, .mega-search input[type=text]").last();}
prev_top_level_item.focus();if(prev_top_level_item.parent().is(items_with_submenus)&&prev_top_level_item.is("[href]")!==false){plugin.showPanel(prev_top_level_item);}else{plugin.hideSiblingPanels(prev_top_level_item);}}});$menu.parent().on("focusout.megamenu",function(e){if($menu.parent().hasClass("mega-keyboard-navigation")){setTimeout(function(){var menu_has_focus=$menu.parent().find(":focus").length>0;if(!menu_has_focus){$menu.parent().removeClass("mega-keyboard-navigation");plugin.hideAllPanels();plugin.hideMobileMenu();}},10);}});};plugin.unbindAllEvents=function(){$("ul.mega-sub-menu, li.mega-menu-item, li.mega-menu-row, li.mega-menu-column, a.mega-menu-link, span.mega-indicator",menu).off().unbind();};plugin.unbindClickEvents=function(){$("> a.mega-menu-link",items_with_submenus).not(collapse_children_parents).off("click.megamenu touchend.megamenu");};plugin.unbindHoverEvents=function(){items_with_submenus.unbind("mouseenter.megamenu mouseleave.megamenu");};plugin.unbindHoverIntentEvents=function(){items_with_submenus.unbind("mouseenter mouseleave").removeProp("hoverIntent_t").removeProp("hoverIntent_s");};plugin.unbindKeyboardEvents=function(){$menu.parent().off("keyup.megamenu keydown.megamenu focusout.megamenu");};plugin.unbindMegaMenuEvents=function(){if(plugin.settings.event==="hover_intent"){plugin.unbindHoverIntentEvents();}
if(plugin.settings.event==="hover"){plugin.unbindHoverEvents();}
plugin.unbindClickEvents();plugin.unbindKeyboardEvents();};plugin.bindMegaMenuEvents=function(){plugin.unbindMegaMenuEvents();if(plugin.isDesktopView()&&plugin.settings.event==="hover_intent"){plugin.bindHoverIntentEvents();}
if(plugin.isDesktopView()&&plugin.settings.event==="hover"){plugin.bindHoverEvents();}
plugin.bindClickEvents();plugin.bindKeyboardEvents();};plugin.checkWidth=function(){if(plugin.isMobileView()&&$menu.data("view")==="desktop"){plugin.switchToMobile();}
if(plugin.isDesktopView()&&$menu.data("view")==="mobile"){plugin.switchToDesktop();}
plugin.calculateDynamicSubmenuWidths($("> li.mega-menu-megamenu > a.mega-menu-link",$menu));};plugin.reverseRightAlignedItems=function(){if(!$("body").hasClass("rtl")&&$menu.hasClass("mega-menu-horizontal")){$menu.append($menu.children("li.mega-item-align-right").get().reverse());}};plugin.addClearClassesToMobileItems=function(){$(".mega-menu-row",$menu).each(function(){$("> .mega-sub-menu > .mega-menu-column:not(.mega-hide-on-mobile)",$(this)).filter(":even").addClass("mega-menu-clear");});};plugin.initDesktop=function(){$menu.data("view","desktop");plugin.bindMegaMenuEvents();plugin.initIndicators();};plugin.switchToDesktop=function(){$menu.data("view","desktop");plugin.bindMegaMenuEvents();plugin.reverseRightAlignedItems();plugin.hideAllPanels();plugin.hideMobileMenu(true);};plugin.initMobile=function(){plugin.switchToMobile();};plugin.switchToMobile=function(){$menu.data("view","mobile");plugin.bindMegaMenuEvents();plugin.initIndicators();plugin.reverseRightAlignedItems();plugin.addClearClassesToMobileItems();plugin.hideAllPanels();plugin.expandMobileSubMenus();};plugin.initToggleBar=function(){$toggle_bar.on("click",function(e){if($(e.target).is(".mega-menu-toggle, .mega-menu-toggle-custom-block *, .mega-menu-toggle-block, .mega-menu-toggle-animated-block, .mega-menu-toggle-animated-block *, .mega-toggle-blocks-left, .mega-toggle-blocks-center, .mega-toggle-blocks-right, .mega-toggle-label, .mega-toggle-label span")){e.preventDefault();if($(this).hasClass("mega-menu-open")){plugin.hideMobileMenu();}else{plugin.showMobileMenu();}}});};plugin.initIndicators=function(){$("span.mega-indicator",$menu).not("[data-has-click-event]").on("click.megamenu",function(e){e.preventDefault();e.stopPropagation();if($(this).parent().parent().hasClass("mega-toggle-on")){if(!$(this).parent().parent().parent().parent().hasClass("mega-menu-tabbed")||plugin.isMobileView()){plugin.hidePanel($(this).parent(),false);}}else{plugin.showPanel($(this).parent(),false);}});$("span.mega-indicator",$menu).each(function(){$(this).attr('data-has-click-event','true');});}
plugin.hideMobileMenu=function(force){force=force||false;if(!$toggle_bar.is(":visible")&&!force){return;}
html_body_class_timeout=setTimeout(function(){$("body").removeClass($menu.attr("id")+"-mobile-open");$("html").removeClass($menu.attr("id")+"-off-canvas-open");},plugin.settings.effect_speed_mobile);$(".mega-toggle-label, .mega-toggle-animated",$toggle_bar).attr("aria-expanded","false");if(plugin.settings.effect_mobile==="slide"&&!force){$menu.animate({"height":"hide"},plugin.settings.effect_speed_mobile,function(){$menu.css({width:"",left:"",display:""});});}
$menu.css({width:"",left:"",display:""});$toggle_bar.removeClass("mega-menu-open");$menu.triggerHandler("mmm:hideMobileMenu");};plugin.showMobileMenu=function(){if(!$toggle_bar.is(":visible")){return;}
clearTimeout(html_body_class_timeout);$("body").addClass($menu.attr("id")+"-mobile-open");plugin.expandMobileSubMenus();if(plugin.settings.effect_mobile==="slide_left"||plugin.settings.effect_mobile==="slide_right"){$("html").addClass($menu.attr("id")+"-off-canvas-open");}
$(".mega-toggle-label, .mega-toggle-animated",$toggle_bar).attr("aria-expanded","true");plugin.toggleBarForceWidth();if(plugin.settings.effect_mobile==="slide"){$menu.animate({"height":"show"},plugin.settings.effect_speed_mobile);}
$toggle_bar.addClass("mega-menu-open");$menu.triggerHandler("mmm:showMobileMenu");};plugin.toggleBarForceWidth=function(){if($(plugin.settings.mobile_force_width).length&&(plugin.settings.effect_mobile==="slide"||plugin.settings.effect_mobile==="disabled")){var submenu_offset=$toggle_bar.offset();var target_offset=$(plugin.settings.mobile_force_width).offset();$menu.css({width:$(plugin.settings.mobile_force_width).outerWidth(),left:(target_offset.left-submenu_offset.left)+"px"});}};plugin.init=function(){$menu.triggerHandler("before_mega_menu_init");plugin.settings=$.extend({},defaults,options);$menu.removeClass("mega-no-js");plugin.initToggleBar();if(plugin.settings.unbind_events==="true"){plugin.unbindAllEvents();}
$(window).on("load",function(){plugin.calculateDynamicSubmenuWidths($("> li.mega-menu-megamenu > a.mega-menu-link",$menu));});if(plugin.isDesktopView()){plugin.initDesktop();}else{plugin.initMobile();}
$(window).resize(function(){plugin.checkWidth();});$menu.triggerHandler("after_mega_menu_init");};plugin.init();};$.fn.maxmegamenu=function(options){return this.each(function(){if(undefined===$(this).data("maxmegamenu")){var plugin=new $.maxmegamenu(this,options);$(this).data("maxmegamenu",plugin);}});};$(function(){$(".max-mega-menu").maxmegamenu();});}(jQuery));